# üîç –ü–û–õ–ù–´–ô –ê–£–î–ò–¢ –ü–†–û–ï–ö–¢–ê SCREEN2CODE
## SaaS –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞ –ø–æ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞–º

**–î–∞—Ç–∞ –∞—É–¥–∏—Ç–∞:** 24 –¥–µ–∫–∞–±—Ä—è 2025
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production
**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞:** 65% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

---

## üìä –¢–ê–ë–õ–ò–¶–ê –ì–û–¢–û–í–ù–û–°–¢–ò –ü–û –°–ò–°–¢–ï–ú–ê–ú

| –°–∏—Å—Ç–µ–º–∞ | –°—Ç–∞—Ç—É—Å | % | –ü—Ä–æ–±–ª–µ–º—ã | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|---------|--------|---|----------|-----------|
| **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** | üü° –§—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ | 60% | –î–≤–æ–π–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ | üî¥ HIGH |
| **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** | ‚úÖ –ì–æ—Ç–æ–≤–∞ | 99% | –ù—É–∂–Ω—ã Google OAuth credentials | üü¢ LOW |
| **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | 85% | –†–∏—Å–∫–∏: –Ω–µ—Ç timeout –Ω–∞ LLM, API polling timeout | üü° MEDIUM |
| **API** | ‚úÖ –ì–æ—Ç–æ–≤ | 100% | –ù–µ—Ç versioning, –Ω–µ—Ç cleanup job | üü¢ LOW |
| **Credits —Å–∏—Å—Ç–µ–º–∞** | ‚úÖ –ì–æ—Ç–æ–≤–∞ | 100% | –†–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è REST API | üü¢ LOW |
| **Billing** | ‚ùå –ù–µ –≥–æ—Ç–æ–≤ | 20% | YuKassa –Ω–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞, –∑–∞–≥–ª—É—à–∫–∏ | üî¥ HIGH |
| **–ê–¥–º–∏–Ω–∫–∞** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | 75% | –ü–ª–∞—Ç–µ–∂–∏ - –ø—É—Å—Ç–∞—è —Ç–∞–±–ª–∏—Ü–∞ | üü° MEDIUM |
| **Feedback** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | 100% | –ù–µ—Ç email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π | üü¢ LOW |
| **UX / User Flow** | üü° –ß–∞—Å—Ç–∏—á–Ω–æ | 50% | –ö—Ä–∏—Ç–∏—á–Ω—ã–µ: –Ω–µ—Ç paywall, –Ω–µ—Ç –ª–∏–º–∏—Ç–æ–≤ UI | üî¥ HIGH |
| **Database** | ‚úÖ –ì–æ—Ç–æ–≤–∞ | 90% | –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —Ç–∞–±–ª–∏—Ü—ã payments/subscriptions | üü° MEDIUM |

**–ò–¢–û–ì–û–í–ê–Ø –û–¶–ï–ù–ö–ê: 65% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ production**

---

## üèóÔ∏è –ë–õ–û–ö 1: –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –í –¶–ï–õ–û–ú

### –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

**Frontend:**
- Vite + React 19 + TypeScript
- React Router v7 (–Ω–µ Next.js)
- Zustand –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º (auth store + admin store)
- Fetch API + WebSocket –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ —Å backend
- shadcn/ui –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã + Tailwind CSS

**Backend:**
- FastAPI 0.115.6 + Python 3.10
- Raw SQLite –±–µ–∑ ORM
- –î–≤–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –Ω–∞–±–æ—Ä–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤:
  - **–°—Ç–∞—Ä—ã–µ `/routes/` (1514 —Å—Ç—Ä–æ–∫)** ‚Äî –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π WebSocket –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
  - **–ù–æ–≤—ã–µ `/api/routes/` (115 —Å—Ç—Ä–æ–∫ –∫–∞–∂–¥—ã–π)** ‚Äî REST API —Å Pydantic models
- asyncio.Queue –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥—å—é –≥–µ–Ω–µ—Ä–∞—Ü–∏–π
- –û–¥–∏–Ω–æ—á–Ω—ã–π Worker –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏

### üî¥ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã

| # | –ö–æ–Ω—Ñ–ª–∏–∫—Ç | –§–∞–π–ª—ã | –°—Ç–∞—Ç—É—Å |
|---|----------|-------|--------|
| 1 | **–î–≤–æ–π–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏** | `/routes/generate_code.py` (1514 —Å—Ç—Ä–æ–∫) vs `/api/routes/generate.py` (115 —Å—Ç—Ä–æ–∫) | –ö–†–ò–¢–ò–ß–ù–´–ô |
| 2 | **–î–≤–∞ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** | `/backend/main.py` + `/backend/api/app.py` | –°–†–ï–î–ù–ò–ô |
| 3 | **–ú–æ–Ω–æ–ª–∏—Ç vs –º–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** | 1514 —Å—Ç—Ä–æ–∫ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ vs 115 —Å—Ç—Ä–æ–∫ –≤ –º–æ–¥—É–ª—è—Ö | –ö–†–ò–¢–ò–ß–ù–´–ô |
| 4 | **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —è–≤–Ω—ã—Ö —Å–ª–æ–µ–≤** | SQL –ø—Ä—è–º–æ –≤ handlers, –Ω–µ—Ç service —Å–ª–æ—è –≤ `/routes/` | –°–†–ï–î–ù–ò–ô |
| 5 | **–ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∫–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä** | Frontend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ä—ã–π WebSocket `/generate-code` | –ö–†–ò–¢–ò–ß–ù–´–ô |
| 6 | **API –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –∫–∞–∫ TODO** | `/api/routes/stream.py:1-5` ‚Äî "Integrate with existing WebSocket" | –ö–†–ò–¢–ò–ß–ù–´–ô |

### ‚úÖ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- Frontend —Ö–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, hooks, contexts)
- REST API –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å—Ç–∏–ª—å (Pydantic models, dependency injection)
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ `/routes/` –∏ `/api/routes/` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ø—ã—Ç–∫—É —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
- Zustand —Ö–æ—Ä–æ—à–æ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

### ‚ùå –°–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- **–ù–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è** ‚Äî –≤–∏–¥–Ω–æ, —á—Ç–æ –±—ã–ª –ø—Ä–æ—Ü–µ—Å—Å `/routes/` ‚Üí `/api/routes/`, –Ω–æ –æ–Ω –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ –ø–æ–ª–ø—É—Ç–∏
- **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–∑–º—ã—Ç–æ** ‚Äî WebSocket, LLM, –ë–î, –æ—á–µ—Ä–µ–¥—å –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ
- **–ù–µ—Ç —è–≤–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –Ω–∞ —Å–ª–æ–∏** ‚Äî handler ‚Üí service ‚Üí repository –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞** ‚Äî –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ imports –∏ router registration –≤ main.py –∏ api/app.py

### üéØ –í—ã–≤–æ–¥

**–ê–†–•–ò–¢–ï–ö–¢–£–†–ê –§–†–ê–ì–ú–ï–ù–¢–ò–†–û–í–ê–ù–ê (60% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏)**

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–≥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞. –ï—Å—Ç—å –¥–≤–µ —Å–∏—Å—Ç–µ–º—ã –¥–ª—è –æ–¥–Ω–æ–π –∑–∞–¥–∞—á–∏ (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞), –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ª–∏–±–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –≤ `/api/routes/`, –ª–∏–±–æ —É–¥–∞–ª–∏—Ç—å –Ω–æ–≤—ã–µ routes –∏ —É–ª—É—á—à–∏—Ç—å —Å—Ç–∞—Ä—ã–µ.

---

## üîê –ë–õ–û–ö 2: –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø –ò –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ò

### –ü–æ–ª–Ω–∞—è —Ü–µ–ø–æ—á–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

```
–ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
        ‚Üì
    /auth/sign-in (Google OAuth –∫–Ω–æ–ø–∫–∞)
        ‚Üì
    window.open("/api/oauth/google")
        ‚Üì
    Google Login (2FA, –ø–∞—Ä–æ–ª—å)
        ‚Üì
    Backend callback: /api/auth/callback/google
        ‚Üì
    Auto-create user –≤ –ë–î –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å
        ‚Üì
    –°–æ–∑–¥–∞—Ç—å session –≤ –ë–î + HttpOnly cookie
        ‚Üì
    Popup –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç message –æ—Å–Ω–æ–≤–Ω–æ–º—É –æ–∫–Ω—É
        ‚Üì
    Frontend: checkAuth() ‚Üí GET /api/auth/user
        ‚Üì
    –ü–æ–ª—É—á–∏—Ç—å user data –∏–∑ session
        ‚Üì
    ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
```

### –¢–∞–±–ª–∏—Ü—ã –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

**–¢–∞–±–ª–∏—Ü–∞ `users`:**
```sql
CREATE TABLE users (
    id TEXT PRIMARY KEY,                -- Google User ID
    email TEXT UNIQUE,
    name TEXT,
    plan TEXT DEFAULT 'free',           -- free/basic/professional
    role TEXT DEFAULT 'user',           -- user/admin
    used_generations INTEGER DEFAULT 0, -- —Å—á–µ—Ç—á–∏–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–π —Ç–µ–∫—É—â–µ–≥–æ –º–µ—Å—è—Ü–∞
    disabled INTEGER DEFAULT 0,         -- 0=active, 1=disabled
    created_at TEXT NOT NULL,
    updated_at TEXT NOT NULL
)
```

**–¢–∞–±–ª–∏—Ü–∞ `sessions`:**
```sql
CREATE TABLE sessions (
    id TEXT PRIMARY KEY,         -- UUID session_id
    user_id TEXT NOT NULL,       -- FK to users(id)
    created_at TEXT NOT NULL,
    expires_at TEXT NOT NULL,    -- 30 –¥–Ω–µ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    FOREIGN KEY (user_id) REFERENCES users(id)
)
```

### –°–∏—Å—Ç–µ–º—ã —Ä–æ–ª–µ–π –∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

| –†–æ–ª—å | –î–æ—Å—Ç—É–ø | –ü—Ä–æ–≤–µ—Ä–∫–∞ |
|------|--------|----------|
| `user` | /playground, /history, /feedback | ProtectedRoute –∫–æ–º–ø–æ–Ω–µ–Ω—Ç |
| `admin` | /admin/* (messages, users, payments) | ProtectedAdminRoute + get_admin_user() dependency |
| `disabled` | –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ | –ü—Ä–æ–≤–µ—Ä–∫–∞ `disabled=1` –≤ get_current_user() |

### ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

**–°–¢–ê–¢–£–°: –ì–û–¢–û–í–ê –ù–ê 99%**

- ‚úÖ Google OAuth –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ Server-side sessions –≤ SQLite
- ‚úÖ HttpOnly cookies (–±–µ–∑–æ–ø–∞—Å–Ω–æ)
- ‚úÖ CSRF protection (state validation)
- ‚úÖ Role-based access control
- ‚úÖ Protected routes (frontend + backend)
- ‚ö†Ô∏è **–ù–£–ñ–ù–û:** –î–æ–±–∞–≤–∏—Ç—å Google OAuth credentials –≤ .env (GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET)

---

## üíæ –ë–õ–û–ö 3: –ì–ï–ù–ï–†–ê–¶–ò–Ø –ö–û–î–ê (–Ø–î–†–û –°–ò–°–¢–ï–ú–´)

### –ü–æ–ª–Ω—ã–π –ø–æ—Ç–æ–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

```
Frontend WebSocket (/generate-code)
        ‚Üì
Backend accepts, saves to DB (status=queued)
        ‚Üì
Enqueue to asyncio.Queue
        ‚Üì
GenerationWorker –±–µ—Ä—ë—Ç –∏–∑ –æ—á–µ—Ä–µ–¥–∏ (status=processing)
        ‚Üì
Pipeline Middleware Chain:
  1. WebSocketSetupMiddleware
  2. ParameterExtractionMiddleware
  3. StatusBroadcastMiddleware
  4. PromptCreationMiddleware
  5. CodeGenerationMiddleware
  6. PostProcessingMiddleware
        ‚Üì
LLM API Call (streaming):
  - OpenAI: gpt-4o, gpt-4.1
  - Anthropic: claude-sonnet-4-5
  - Google: gemini-2-0-flash
        ‚Üì
Streaming chunks via WebSocket
        ‚Üì
–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ generation_variants table
        ‚Üì
–û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞
        ‚Üì
Status = completed
```

### WebSocket Message Types

| Type | –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ | –ö–æ–≥–¥–∞ | –ü—Ä–∏–º–µ—Ä |
|------|-----------|--------|---------|
| `variantCount` | Server ‚Üí Client | –ù–∞—á–∞–ª–æ (–≤—Å–µ–≥–¥–∞ "1") | `{"type": "variantCount", "value": "1"}` |
| `status` | Server ‚Üí Client | –ù–∞ —Å–æ–±—ã—Ç–∏—è | `{"type": "status", "value": "Generating..."}` |
| `chunk` | Server ‚Üí Client | Streaming | `{"type": "chunk", "value": "<html>..."}` |
| `setCode` | Server ‚Üí Client | –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è | `{"type": "setCode", "value": "...–ø–æ–ª–Ω—ã–π html..."}` |
| `variantComplete` | Server ‚Üí Client | –§–∏–Ω–∏—à | `{"type": "variantComplete", "value": "Complete"}` |
| `variantError` | Server ‚Üí Client | –û—à–∏–±–∫–∞ | `{"type": "variantError", "value": "error msg"}` |
| `error` | Server ‚Üí Client | –ö—Ä–∏—Ç–∏—á–Ω–∞—è –æ—à–∏–±–∫–∞ | `{"type": "error", "value": "..."}` |

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã (–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤)

**–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ:**
- 4 –≤–∞—Ä–∏–∞–Ω—Ç–∞ (NUM_VARIANTS = 4)
- –†–∞–∑–Ω—ã–µ –º–æ–¥–µ–ª–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞

**–†–µ–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:**
- **–¢–û–õ–¨–ö–û 1 –≤–∞—Ä–∏–∞–Ω—Ç** (ACTIVE_VARIANT_INDEX = 2)
- –í–∞—Ä–∏–∞–Ω—Ç 3: gpt-4.1 (production) –∏–ª–∏ gpt-4.1-mini (development)
- –û—Å—Ç–∞–ª—å–Ω—ã–µ 3 –≤–∞—Ä–∏–∞–Ω—Ç–∞ –û–¢–ö–õ–Æ–ß–ï–ù–´ (—ç–∫–æ–Ω–æ–º–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –≤ 4 —Ä–∞–∑–∞)

### LLM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –º–æ–¥–µ–ª–∏:**
- OpenAI: gpt-4o, gpt-4.1, gpt-4.1-mini
- Anthropic: claude-sonnet-4-5-20250929
- Google: gemini-2-0-flash, gemini-2-0-pro-exp

**Retry –ª–æ–≥–∏–∫–∞:**
- –¢–æ–ª—å–∫–æ –¥–ª—è React/Vue (validation retry)
- –ú–∞–∫—Å–∏–º—É–º 1 retry —Å repair instruction
- Fallback –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ

**–ü—Ä–æ–º–ø—Ç—ã:**
- `/backend/prompts/claude_prompts.py` ‚Äî —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è Claude
- `/backend/prompts/screenshot_system_prompts.py` ‚Äî –ø–æ —Å—Ç–∞–∫–∞–º

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

| –ü—Ä–æ–±–ª–µ–º–∞ | –°—Ç–∞—Ç—É—Å | –í–ª–∏—è–Ω–∏–µ |
|----------|--------|---------|
| –ù–µ—Ç timeout –Ω–∞ LLM API | ‚ö†Ô∏è –†–ò–°–ö | –ú–æ–∂–µ—Ç –∑–∞–≤–∏—Å–Ω—É—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞ |
| API polling timeout = 5 –º–∏–Ω—É—Ç | ‚ö†Ô∏è –†–ò–°–ö | –î–ª–∏–Ω–Ω—ã–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –±—É–¥—É—Ç timeout'–∏—Ç—å |
| –û–¥–∏–Ω–æ—á–Ω—ã–π Worker | ‚ö†Ô∏è –†–ò–°–ö | –ï—Å–ª–∏ —É–ø–∞–¥—ë—Ç, –æ—á–µ—Ä–µ–¥—å –∑–∞–≤–∏—Å–Ω–µ—Ç |
| –ù–µ—Ç exception handling –≤ main loop Worker | ‚ö†Ô∏è –†–ò–°–ö | –ú–æ–∂–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è |
| Chunk'–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ (DatabaseWebSocket) | ‚ö†Ô∏è –†–ò–°–ö | –ü–æ—Ç–µ—Ä—è –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö |

### ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

**–°–¢–ê–¢–£–°: –†–ê–ë–û–¢–ê–ï–¢, –ù–û –° –†–ò–°–ö–ê–ú–ò (85% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏)**

- ‚úÖ WebSocket streaming —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Queuing —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ LLM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Graceful error handling
- ‚ö†Ô∏è –ù–µ—Ç timeout –Ω–∞ LLM API –≤—ã–∑–æ–≤—ã
- ‚ö†Ô∏è –ù–µ—Ç Circuit breaker pattern
- ‚ö†Ô∏è –ù–µ—Ç metrics/monitoring

---

## üîå –ë–õ–û–ö 4: REST API

### –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ endpoints

| Endpoint | –ú–µ—Ç–æ–¥ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –ó–∞—â–∏—Ç–∞ |
|----------|-------|----------------|--------|--------|
| `/api/health` | GET | –ù–µ —Ç—Ä–µ–±—É–µ—Ç | ‚úÖ | –û—Ç–∫—Ä—ã—Ç—ã–π |
| `/api/formats` | GET | REST –∫–ª–∏–µ–Ω—Ç—ã | ‚úÖ | API key |
| `/api/generate` | POST | REST –∫–ª–∏–µ–Ω—Ç—ã | ‚úÖ | API key |
| `/api/stream/{id}` | WS | REST –∫–ª–∏–µ–Ω—Ç—ã | ‚úÖ | API key |
| `/api/generations/{id}` | GET | REST –∫–ª–∏–µ–Ω—Ç—ã | ‚úÖ | API key |
| `/api/limits` | GET | REST –∫–ª–∏–µ–Ω—Ç—ã | ‚úÖ | API key |
| `/api/billing/usage` | GET | Web UI | ‚úÖ | Session |
| `/api/feedback` | POST | Web UI | ‚úÖ | Session |
| `/api/auth/user` | GET | Web UI | ‚úÖ | Session |
| `/api/auth/logout` | POST | Web UI | ‚úÖ | Session |
| `/api/auth/callback/google` | GET | OAuth callback | ‚úÖ | State validation |
| `/api/admin/users` | GET | Web Admin | ‚úÖ | Admin role |
| `/api/admin/users/change-plan` | POST | Web Admin | ‚úÖ | Admin role |
| `/api/admin/users/disable` | PATCH | Web Admin | ‚úÖ | Admin role |
| `/api/admin/messages` | GET | Web Admin | ‚úÖ | Admin role |
| `/api/admin/messages/{id}` | GET | Web Admin | ‚úÖ | Admin role |

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Frontend

**API calls –Ω–∞–π–¥–µ–Ω—ã:**
- `/api/auth/user` ‚Äî –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ app (checkAuth)
- `/api/auth/logout` ‚Äî –ø—Ä–∏ logout
- `/api/billing/usage` ‚Äî –Ω–∞ /settings/billing —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- `/api/admin/users` ‚Äî –Ω–∞ /admin/users —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- `/api/admin/messages` ‚Äî –Ω–∞ /admin/messages —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- `/api/admin/messages/unread-count` ‚Äî –¥–ª—è –±–µ–π–¥–∂–∞ –≤ sidebar

### –ß—Ç–æ –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

| Endpoint | –ü—Ä–∏—á–∏–Ω–∞ | –î–æ–ª–∂–Ω–æ –±—ã—Ç—å |
|----------|---------|-------------|
| `/api/generate` | Frontend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç WebSocket | –î–ª—è REST –∫–ª–∏–µ–Ω—Ç–æ–≤ ‚Äî —ç—Ç–æ OK |
| `/api/stream/{id}` | –°—Ç–∞–±, —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ | –ù—É–∂–Ω–∞ –ø–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è |

### ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å API

**–°–¢–ê–¢–£–°: –ü–û–õ–ù–û–°–¢–¨–Æ –ì–û–¢–û–í (100%)**

- ‚úÖ –í—Å–µ endpoints —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª–Ω–∞—è (API_SPEC.md)
- ‚úÖ Rate limiting —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –°—Ç–∞—Ç—É—Å –∫–æ–¥—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ
- ‚ö†Ô∏è –ù–µ—Ç versioning (–Ω–µ—Ç v1/, v2/)
- ‚ö†Ô∏è –ù–µ—Ç cleanup job –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –≥–µ–Ω–µ—Ä–∞—Ü–∏–π

---

## üí∞ –ë–õ–û–ö 5: CREDITS, –¢–ê–†–ò–§–´, –õ–ò–ú–ò–¢–´

### –ß—Ç–æ —Ç–∞–∫–æ–µ Credits

**–î–ª—è REST API –∫–ª–∏–µ–Ω—Ç–æ–≤:**
- Credits = —É—Å–ª–æ–≤–Ω—ã–µ –µ–¥–∏–Ω–∏—Ü—ã –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è usage
- `html_tailwind`: 1 credit
- `html_css`: 1 credit
- `react_tailwind`: 2 credits
- `vue_tailwind`: 2 credits

**–î–ª—è Web UI –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–∞ `generations/month` (–Ω–µ credits)
- `used_generations` —Å—á–µ—Ç—á–∏–∫ –≤ —Ç–∞–±–ª–∏—Ü–µ `users`

### –•—Ä–∞–Ω–∏–ª–∏—â–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

**–¢–∞–±–ª–∏—Ü–∞ `api_keys` (–¥–ª—è REST API):**
```sql
CREATE TABLE api_keys (
    id TEXT PRIMARY KEY,
    key_hash TEXT UNIQUE,
    tier TEXT DEFAULT 'free',
    credits_total INTEGER,
    credits_used INTEGER,
    rate_limit_concurrent INTEGER DEFAULT 10,
    rate_limit_hourly INTEGER DEFAULT 100,
    created_at TIMESTAMP,
    is_active BOOLEAN DEFAULT 1
)
```

**–¢–∞–±–ª–∏—Ü–∞ `users` (–¥–ª—è Web UI):**
```sql
plan TEXT DEFAULT 'free',                    -- free/basic/professional
used_generations INTEGER DEFAULT 0,          -- —Å–∫–æ–ª—å–∫–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –≤ —ç—Ç–æ–º –º–µ—Å—è—Ü–µ
```

### –¢–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã

**REST API:**
| Tier | Credits/–º–µ—Å—è—Ü | Concurrent | Per hour | –î–æ—Å—Ç—É–ø |
|------|--------------|-----------|----------|--------|
| free | ? | 10 | 100 | html —Ç–æ–ª—å–∫–æ |
| pro | –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ | 10 | 100 | –í—Å–µ —Ñ–æ—Ä–º–∞—Ç—ã |

**Web UI:**
| –ü–ª–∞–Ω | Generations/–º–µ—Å—è—Ü | –§–æ—Ä–º–∞—Ç—ã | –¶–µ–Ω–∞ |
|------|-----------------|---------|------|
| free | 30 | HTML | 0‚ÇΩ |
| basic | 200 | HTML, React | 2,490‚ÇΩ |
| professional | 1000 | HTML, React, Vue, SVG | 8,490‚ÇΩ |

### –ö–∞–∫ —Å–ø–∏—Å—ã–≤–∞—é—Ç—Å—è Credits

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—É—Å–∫–∞–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—é (POST /api/generate)
2. Backend –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –µ—Å—Ç—å –ª–∏ credits: `credits_total - credits_used >= cost`
3. **–ù–ï–ú–ï–î–õ–ï–ù–ù–û –≤—ã—á–∏—Ç–∞–µ—Ç credits**: `UPDATE api_keys SET credits_used += cost`
4. –ó–∞–ø—É—Å–∫–∞–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –≤ background
5. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ ‚Üí **—Ä–µ—Ñ–∞–Ω–¥–∞ –Ω–µ—Ç**

**–§–∞–π–ª:** `/backend/api/credits.py:61` (deduct_credits —Ñ—É–Ω–∫—Ü–∏—è)

### –õ–∏–º–∏—Ç—ã –∏ Rate Limiting

**Concurrent –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:**
- –ú–∞–∫—Å–∏–º—É–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ: 10
- –ì–¥–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è: `SELECT COUNT(*) FROM api_generations WHERE status='processing'`

**Hourly Rate Limit:**
- –ú–∞–∫—Å–∏–º—É–º –≤ —á–∞—Å: 100
- –ì–¥–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è: `SELECT COUNT(*) FROM api_generations WHERE created_at > (now - 1 hour)`

### ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å Credits —Å–∏—Å—Ç–µ–º—ã

**–°–¢–ê–¢–£–°: –ü–û–õ–ù–û–°–¢–¨–Æ –ì–û–¢–û–í–ê (100%)**

- ‚úÖ Credits —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –í—ã—á–∏—Ç–∞—é—Ç—Å—è –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º (—ç–∫–æ–Ω–æ–º–∏—Ç —Ä–µ—Å—É—Ä—Å—ã)
- ‚úÖ Rate limiting —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –õ–∏–º–∏—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è

---

## üí≥ –ë–õ–û–ö 6: BILLING / –ü–õ–ê–¢–ï–ñ–ò

### –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å |
|-----------|--------|-----------|
| UI —Å—Ç—Ä–∞–Ω–∏—Ü–∞ /settings/billing | ‚úÖ –ì–û–¢–û–í–ê | 100% |
| Frontend API calls | ‚ö†Ô∏è –ó–ê–ì–õ–£–®–ö–ê | 0% |
| Backend endpoints | ‚ö†Ô∏è –ó–ê–ì–õ–£–®–ö–ê | 0% |
| YuKassa –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è | ‚ùå –ù–ï –£–°–¢–ê–ù–û–í–õ–ï–ù–ê | 0% |
| –¢–∞–±–ª–∏—Ü–∞ payments | ‚ùå –ù–ï –°–û–ó–î–ê–ù–ê | 0% |
| –¢–∞–±–ª–∏—Ü–∞ subscriptions | ‚ùå –ù–ï –°–û–ó–î–ê–ù–ê | 0% |

### Frontend Billing Page

**–§–∞–π–ª:** `/frontend/src/app/settings/billing/page.tsx`

**–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
1. Current Plan Card:
   - –ü–ª–∞–Ω: Free
   - –°—Ç–∞—Ç—É—Å: Active
   - Credits used: 7/30 (23%)
   - Progress bar

2. Available Plans Card:
   - Free: 500 credits/–º–µ—Å—è—Ü, $0/–º–µ—Å—è—Ü
   - Basic: 5,000 credits/–º–µ—Å—è—Ü, $29/–º–µ—Å—è—Ü (–ø–æ–ø—É–ª—è—Ä–Ω—ã–π)
   - Professional: 25,000 credits/–º–µ—Å—è—Ü, $99/–º–µ—Å—è—Ü
   - –ö–Ω–æ–ø–∫–∏: [Current Plan], [Upgrade Plan], [Upgrade]

3. Billing History Card:
   - –ü—É—Å—Ç–æ (–Ω–µ—Ç –ø–ª–∞—Ç–µ–∂–µ–π)

### ‚ùå –ß—Ç–æ –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç

**Frontend API —Ñ—É–Ω–∫—Ü–∏–∏ (–∑–∞–≥–ª—É—à–∫–∏):**
```typescript
// /frontend/src/logic/billing/api.ts
export async function subscribe(planId: string) {
  console.warn('[BILLING] subscribe() - TODO: implement')
  // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç mock error
}
```

**Backend endpoints:**
- POST /api/billing/subscribe ‚Äî –∑–∞–≥–ª—É—à–∫–∞
- POST /api/billing/buy-credits ‚Äî –∑–∞–≥–ª—É—à–∫–∞
- POST /api/billing/webhook ‚Äî –∑–∞–≥–ª—É—à–∫–∞

**Admin Payments Page:**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
- –°–æ–æ–±—â–µ–Ω–∏–µ: "Payments table not created yet"

### üìã –ü–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ÆKassa

**–ò–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ YUKASSA_INTEGRATION.md:**

1. **Backend:**
   - [ ] `pip install yookassa`
   - [ ] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã `subscriptions` –∏ `payments`
   - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å 5 endpoints
   - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å env variables (YUKASSA_SHOP_ID, YUKASSA_SECRET_KEY)

2. **Frontend:**
   - [ ] –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å fetch calls
   - [ ] –ü–æ–¥–∫–ª—é—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ endpoints

3. **–¢–∞–±–ª–∏—Ü—ã –ë–î:**
   ```sql
   CREATE TABLE subscriptions (
       id TEXT PRIMARY KEY,
       user_id TEXT NOT NULL,
       plan_id TEXT NOT NULL,
       status TEXT,  -- active, cancelled, past_due
       yukassa_subscription_id TEXT UNIQUE,
       current_period_start TIMESTAMP,
       current_period_end TIMESTAMP
   )

   CREATE TABLE payments (
       id TEXT PRIMARY KEY,
       user_id TEXT NOT NULL,
       type TEXT,  -- subscription, topup
       amount INTEGER,  -- –≤ –∫–æ–ø–µ–π–∫–∞—Ö
       credits_amount INTEGER,
       status TEXT,  -- pending, succeeded, cancelled
       yukassa_payment_id TEXT UNIQUE,
       created_at TIMESTAMP
   )
   ```

### ‚ùå –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å Billing

**–°–¢–ê–¢–£–°: –ù–ï –ì–û–¢–û–í–ê (20%)**

- ‚úÖ UI –¥–∏–∑–∞–π–Ω –∫—Ä–∞—Å–∏–≤—ã–π
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —Å–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∞
- ‚ùå Backend endpoints - –∑–∞–≥–ª—É—à–∫–∏
- ‚ùå YuKassa –Ω–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞
- ‚ùå –¢–∞–±–ª–∏—Ü—ã –Ω–µ —Å–æ–∑–¥–∞–Ω—ã
- ‚ùå –û–ø–ª–∞—Ç–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üë®‚Äçüíº –ë–õ–û–ö 7: –ê–î–ú–ò–ù–ö–ê –ò FEEDBACK

### –ê–¥–º–∏–Ω–∫–∞

**–°—Ç–∞—Ç—É—Å: –†–ê–ë–û–¢–ê–ï–¢ (75% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏)**

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:**

1. **`/admin/messages` ‚Äî Feedback**
   - ‚úÖ –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö feedback —Å–æ–æ–±—â–µ–Ω–∏–π
   - ‚úÖ –§–∏–ª—å—Ç—Ä—ã (–≤—Å–µ / –Ω–æ–≤—ã–µ / –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ)
   - ‚úÖ –ü–æ–∏—Å–∫ –ø–æ email
   - ‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è (10 —à—Ç/—Å—Ç—Ä–∞–Ω–∏—Ü–∞)
   - ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–∫—Ä–∞—Å–Ω–∞—è –±–µ–π–¥–∂ —Å —á–∏—Å–ª–æ–º –Ω–æ–≤—ã—Ö)
   - ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π

2. **`/admin/users` ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏**
   - ‚úÖ –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (email, name, plan, use count)
   - ‚úÖ –§–∏–ª—å—Ç—Ä—ã –ø–æ email
   - ‚úÖ –ò–∑–º–µ–Ω–∏—Ç—å –ø–ª–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - ‚úÖ –û—Ç–∫–ª—é—á–∏—Ç—å/–≤–∫–ª—é—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (disabled=1)
   - ‚úÖ –°–±—Ä–æ—Å–∏—Ç—å –ª–∏–º–∏—Ç—ã (reset used_generations)
   - ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å use count (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

3. **`/admin/payments` ‚Äî –ü–ª–∞—Ç–µ–∂–∏**
   - ‚ùå –ó–ê–ì–õ–£–®–ö–ê (–ø—É—Å—Ç–∞—è —Ç–∞–±–ª–∏—Ü–∞, –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö)
   - –°–æ–æ–±—â–µ–Ω–∏–µ: "Payments table not created yet"

### Feedback —Å–∏—Å—Ç–µ–º–∞

**–°—Ç–∞—Ç—É—Å: –†–ê–ë–û–¢–ê–ï–¢ –ü–û–õ–ù–û–°–¢–¨–Æ (100%)**

**–ü—É—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
1. –ù–∞–∂–∏–º–∞–µ—Ç "Feedback" –≤ sidebar
2. –ó–∞–ø–æ–ª–Ω—è–µ—Ç textarea (–º–∏–Ω–∏–º—É–º 10 —Å–∏–º–≤–æ–ª–æ–≤)
3. –ù–∞–∂–∏–º–∞–µ—Ç "Submit"
4. POST /api/feedback { message: "..." }
5. Backend —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü—É `admin_messages`
6. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç Success screen

**–ö–∞–∫ –∞–¥–º–∏–Ω —á–∏—Ç–∞–µ—Ç:**
1. –í–∏–¥–∏—Ç –∫—Ä–∞—Å–Ω—É—é –±–µ–π–¥–∂ "Messages (3)" –≤ sidebar
2. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç /admin/messages
3. –í–∏–¥–∏—Ç —Å–ø–∏—Å–æ–∫ feedback (–¥–∞—Ç–∞, email, –ø—Ä–µ–≤—å—é —Å–æ–æ–±—â–µ–Ω–∏—è)
4. –ö–ª–∏–∫ ‚Üí –ø–æ–¥—Ä–æ–±–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä
5. –ú–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ

**–°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:**
- Polling –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫
- GET /api/admin/messages/unread-count
- –û–±–Ω–æ–≤–ª—è–µ—Ç –±–µ–π–¥–∂ –≤ sidebar –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –ê–¥–º–∏–Ω–∫–∏

**–°–¢–ê–¢–£–°: –ì–û–¢–û–í–ê (75%)**

- ‚úÖ Messages –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ Users –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ Feedback —Ñ–æ—Ä–º–∞ –∫—Ä–∞—Å–∏–≤–∞—è
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –ó–∞—â–∏—Ç–∞ –¥–æ—Å—Ç—É–ø–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- ‚ö†Ô∏è Payments - —Ç–æ–ª—å–∫–æ –∑–∞–≥–ª—É—à–∫–∞

---

## üë• –ë–õ–û–ö 8: UX / USER FLOW

### –ü–æ–ª–Ω—ã–π –ø—É—Ç—å –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å –ø—Ä–æ–±–ª–µ–º–∞–º–∏)

```
1. –ü–û–°–ï–©–ï–ù–ò–ï –°–ê–ô–¢–ê
   ‚Üì (navigate to /dashboard)
   ‚ùå –ü–†–û–ë–õ–ï–ú–ê: Dashboard –ø—É—Å—Ç, –Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–ª–∞–Ω–µ
   ‚ùå –Æ–∑–µ—Ä –Ω–µ –∑–Ω–∞–µ—Ç —á—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

2. –ù–ê–ñ–ò–ú–ê–ï–¢ "PLAYGROUND" (–∏–∑ sidebar)
   ‚Üì (navigate to /playground)
   ‚ùå –ü–†–û–ë–õ–ï–ú–ê: –ù–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–∫—É—â–∏—Ö –ª–∏–º–∏—Ç–∞—Ö
   ‚ùå –ù–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —á—Ç–æ React/Vue —Ç—Ä–µ–±—É—é—Ç Pro –ø–ª–∞–Ω
   ‚ùå React/Vue –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ free –ø–ª–∞–Ω–µ (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å disabled)

3. –ó–ê–ì–†–£–ñ–ê–ï–¢ –°–ö–†–ò–ù–®–û–¢ –ò –ù–ê–ñ–ò–ú–ê–ï–¢ "GENERATE"
   ‚Üì (WebSocket /generate-code)
   ‚úÖ –†–ê–ë–û–¢–ê–ï–¢: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
   ‚úÖ –†–ê–ë–û–¢–ê–ï–¢: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ history

4. –ò–°–ü–û–õ–¨–ó–£–ï–¢ –ù–ï–°–ö–û–õ–¨–ö–û –ì–ï–ù–ï–†–ê–¶–ò–ô (5-30)
   ‚Üì (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏–º–∏—Ç –ø–ª–∞–Ω–∞)
   ‚ùå –ö–†–ò–¢–ò–ß–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê: –ù–µ—Ç UI –¥–ª—è –ø–æ–∫–∞–∑–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ª–∏–º–∏—Ç–æ–≤
   ‚ùå –ù–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä–∞
   ‚ùå –ù–µ—Ç warning –ø—Ä–∏ 90%, 99% –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏

5. –ü–†–ï–í–´–®–ê–ï–¢ –õ–ò–ú–ò–¢ (30+ –Ω–∞ free –ø–ª–∞–Ω–µ)
   ‚Üì (–ø—ã—Ç–∞–µ—Ç—Å—è —Å–¥–µ–ª–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é)
   ‚ùå –ö–†–ò–¢–ò–ß–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê: –ú–æ–ª—á–∞–ª–∏–≤—ã–π –æ—Ç–∫–∞–∑ (–Ω–µ—Ç –æ—à–∏–±–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é)
   ‚ùå –ö–†–ò–¢–ò–ß–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê: –ù–µ—Ç paywall –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
   ‚ùå –Æ–∑–µ—Ä –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç —á—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ

6. –ù–ê–•–û–î–ò–¢ /SETTINGS/BILLING (—Å–ª–æ–∂–Ω–æ –Ω–∞–π—Ç–∏)
   ‚Üì (–≤–∏–¥–∏—Ç –ø–ª–∞–Ω—ã –∏ —Ü–µ–Ω—ã)
   ‚ùå –ö–†–ò–¢–ò–ß–ù–ê–Ø –ü–†–û–ë–õ–ï–ú–ê: –ö–Ω–æ–ø–∫–∏ "Upgrade Plan" –ù–ï –†–ê–ë–û–¢–ê–Æ–¢
   ‚ùå –û–ø–ª–∞—Ç–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
   ‚ùå –Æ–∑–µ—Ä –Ω–µ –º–æ–∂–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å –ø–ª–∞–Ω

7. –†–ï–ó–£–õ–¨–¢–ê–¢:
   ‚ùå –ü–û–¢–ï–†–Ø–ù–ù–´–ô –ö–õ–ò–ï–ù–¢ (–Ω–µ —Å–º–æ–≥ –æ–±–Ω–æ–≤–∏—Ç—å –ø–ª–∞–Ω)
```

### –¢–∞–±–ª–∏—Ü–∞ UX –ø—Ä–æ–±–ª–µ–º

| # | –ü—Ä–æ–±–ª–µ–º–∞ | –õ–æ–∫–∞—Ü–∏—è | –¢–∏–ø | –í–ª–∏—è–Ω–∏–µ | Fix |
|---|----------|---------|------|---------|-----|
| 1 | Dashboard –ø—É—Å—Ç–æ | /dashboard | üî¥ –ö–†–ò–¢–ò–ß–ù–ê–Ø | –Æ–∑–µ—Ä —Ç–µ—Ä—è–µ—Ç—Å—è | –ü–æ–∫–∞–∑–∞—Ç—å –ø–ª–∞–Ω, –ª–∏–º–∏—Ç—ã, call-to-action |
| 2 | –ù–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ª–∏–º–∏—Ç–∞—Ö | /playground | üî¥ –ö–†–ò–¢–ò–ß–ù–ê–Ø | –Æ–∑–µ—Ä –Ω–µ –∑–Ω–∞–µ—Ç —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç | –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É —Å –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º–∏ –ª–∏–º–∏—Ç–∞–º–∏ |
| 3 | –ú–æ–ª—á–∞–ª–∏–≤—ã–π –æ—Ç–∫–∞–∑ –ø—Ä–∏ hit limit | /playground | üî¥ –ö–†–ò–¢–ò–ß–ù–ê–Ø | –ù–µ–ø–æ–Ω—è—Ç–Ω–æ –ø–æ—á–µ–º—É –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç | –ü–æ–∫–∞–∑–∞—Ç—å paywall —ç–∫—Ä–∞–Ω |
| 4 | –ö–Ω–æ–ø–∫–∏ "Upgrade" –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç | /settings/billing | üî¥ –ö–†–ò–¢–ò–ß–ù–ê–Ø | –ù–µ –º–æ–∂–µ—Ç –ø–ª–∞—Ç–∏—Ç—å | –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–ø–ª–∞—Ç—É (YuKassa) |
| 5 | React/Vue –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ free | /playground | üü° –í–ê–ñ–ù–û | –Æ–∑–µ—Ä –º–æ–∂–µ—Ç –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å, –ø–æ–ª—É—á–∏—Ç –æ—à–∏–±–∫—É | –û—Ç–∫–ª—é—á–∏—Ç—å select (disabled) |
| 6 | –ù–µ—Ç warning –ø–µ—Ä–µ–¥ –ª–∏–º–∏—Ç–æ–º | /playground | üü° –í–ê–ñ–ù–û | –Æ–∑–µ—Ä —É–∑–Ω–∞–µ—Ç —Å–ª–∏—à–∫–æ–º –ø–æ–∑–¥–Ω–æ | –ü–æ–∫–∞–∑–∞—Ç—å warning –ø—Ä–∏ 90%, 99% |
| 7 | –ò—Å—Ç–æ—Ä–∏—è —Ç–æ–ª—å–∫–æ –≤ localStorage | /history | üü° –í–ê–ñ–ù–û | –ò—Å—Ç–æ—Ä–∏—è —Ç–µ—Ä—è–µ—Ç—Å—è | –°–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ backend |
| 8 | –ü–ª–∞—Ç–µ–∂–∏ - –ø—É—Å—Ç–∞—è —Ç–∞–±–ª–∏—Ü–∞ | /admin/payments | üü† –°–†–ï–î–ù–ï–ï | –ê–¥–º–∏–Ω –Ω–µ –≤–∏–¥–∏—Ç –ø–ª–∞—Ç–µ–∂–∏ | –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –ø–æ—Å–ª–µ YuKassa |

### –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ (drop-off points)

```
100 –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

Sign In (Google OAuth)           100 users (100%)
        ‚Üì
Dashboard (empty, no info)       80 users (-20%)
        ‚Üì
Playground (no limits UI)        50 users (-30%)
        ‚Üì
First generation                 50 users (100%)
        ‚Üì
Several generations (1-30)       40 users (80%)
        ‚Üì
Out of limits (hit cap)          30 users (-10%)
        ‚Üì
Discover /settings/billing       15 users (-50%)
        ‚Üì
Try to upgrade                   2 users (-87%)
        ‚Üì
‚úÖ PAID CUSTOMERS                2 users (2% –ö–û–ù–í–ï–†–°–ò–Ø)
```

**–ö–†–ò–¢–ò–ß–ù–´–ï –ü–û–¢–ï–†–ò:**
1. Dashboard –ø—É—Å—Ç: -20%
2. –ù–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ª–∏–º–∏—Ç–∞—Ö: -30%
3. –ù–µ –Ω–∞—Ö–æ–¥—è—Ç billing —Å—Ç—Ä–∞–Ω–∏—Ü—É: -50%
4. –ö–Ω–æ–ø–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç: -87%

**–ò–¢–û–ì–û–í–ê–Ø –ö–û–ù–í–ï–†–°–ò–Ø: 2/100 = 2% (–û–ß–ï–ù–¨ –ù–ò–ó–ö–û!)**

### ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å UX

**–°–¢–ê–¢–£–°: –ß–ê–°–¢–ò–ß–ù–û –ì–û–¢–û–í–ê (50%)**

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ Google OAuth (–∫—Ä–∞—Å–∏–≤—ã–π flow)
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤/URL
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ (streaming)
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è (localStorage)
- ‚úÖ –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**–ß—Ç–æ –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚ùå –ù–µ—Ç UI –¥–ª—è –ª–∏–º–∏—Ç–æ–≤
- ‚ùå –ù–µ—Ç paywall
- ‚ùå –ö–Ω–æ–ø–∫–∏ upgrade –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚ùå –ú–æ–ª—á–∞–ª–∏–≤—ã–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ hit limit

---

## üö® –ë–õ–û–ö 9: –ö–†–ò–¢–ò–ß–ù–´–ï –ë–õ–û–ö–ï–†–´ –ò –ü–†–û–ë–ï–õ–´

### üî¥ –ö–†–ò–¢–ò–ß–ù–´–ï (–ë–õ–û–ö–ò–†–£–Æ–¢ –ó–ê–ü–£–°–ö –í PRODUCTION)

1. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞**
   - –î–≤–µ —Å–∏—Å—Ç–µ–º—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (WS –∏ REST), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞
   - –ù—É–∂–Ω–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏–ª–∏ —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è
   - **–°–ª–æ–∂–Ω–æ—Å—Ç—å:** HIGH | **–í—Ä–µ–º—è:** 3-5 –¥–Ω–µ–π

2. **Billing –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**
   - YuKassa –Ω–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞
   - –¢–∞–±–ª–∏—Ü—ã payments/subscriptions –Ω–µ —Å–æ–∑–¥–∞–Ω—ã
   - –ö–Ω–æ–ø–∫–∏ upgrade –Ω–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã
   - **–°–ª–æ–∂–Ω–æ—Å—Ç—å:** HIGH | **–í—Ä–µ–º—è:** 3-4 –¥–Ω—è

3. **–ö—Ä–∏—Ç–∏—á–Ω—ã–µ UX –ø—Ä–æ–±–ª–µ–º—ã (–±–ª–æ–∫–∏—Ä—É—é—Ç –∫–æ–Ω–≤–µ—Ä—Å–∏—é)**
   - –ù–µ—Ç UI –¥–ª—è –ø–æ–∫–∞–∑–∞ –ª–∏–º–∏—Ç–æ–≤ –Ω–∞ playground
   - –ù–µ—Ç paywall —ç–∫—Ä–∞–Ω–∞ –ø—Ä–∏ hit limit
   - –ú–æ–ª—á–∞–ª–∏–≤—ã–µ –æ—à–∏–±–∫–∏ (–Ω–µ—Ç feedback –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é)
   - **–°–ª–æ–∂–Ω–æ—Å—Ç—å:** MEDIUM | **–í—Ä–µ–º—è:** 2-3 –¥–Ω—è

4. **LLM API –Ω–µ—Ç timeout'–∞**
   - –ú–æ–∂–µ—Ç –∑–∞–≤–∏—Å–Ω—É—Ç—å –Ω–∞–≤—Å–µ–≥–¥–∞ –µ—Å–ª–∏ OpenAI/Anthropic –∑–∞–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è
   - –ù–µ—Ç Circuit breaker pattern
   - **–°–ª–æ–∂–Ω–æ—Å—Ç—å:** MEDIUM | **–í—Ä–µ–º—è:** 1 –¥–µ–Ω—å

5. **Google OAuth credentials –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç**
   - –ù—É–∂–Ω—ã GOOGLE_CLIENT_ID –∏ GOOGLE_CLIENT_SECRET –≤ .env
   - –ù—É–∂–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Google Cloud Console
   - **–°–ª–æ–∂–Ω–æ—Å—Ç—å:** LOW | **–í—Ä–µ–º—è:** 30 –º–∏–Ω—É—Ç

### üü° –í–ê–ñ–ù–´–ï (–ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨ –ë–´–°–¢–†–û)

1. **–£–ª—É—á—à–∏—Ç—å Dashboard**
   - –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–π –ø–ª–∞–Ω
   - –ü–æ–∫–∞–∑–∞—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
   - Call-to-action: "Start generating"

2. **–ó–∞—â–∏—Ç–∏—Ç—å Pro —Ñ–æ—Ä–º–∞—Ç—ã –Ω–∞ free –ø–ª–∞–Ω–µ**
   - React/Vue –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å disabled select
   - Tooltip: "Available in Pro plan"

3. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –Ω–∞ backend**
   - –°–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ –ë–î, –ø—Ä–∏–≤—è–∑—ã–≤–∞—Ç—å –∫ —é–∑–µ—Ä—É
   - –ù–µ –ø–æ—Ç–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ –æ—á–∏—Å—Ç–∫–µ –∫—ç—à–∞

4. **–î–æ–±–∞–≤–∏—Ç—å warning –ø–µ—Ä–µ–¥ –ª–∏–º–∏—Ç–æ–º**
   - –ü—Ä–∏ 90% –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
   - –ü—Ä–∏ 99% –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏

### üü¢ CAN WAIT (nice to have)

1. **–û–±—É—á–∞—é—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç**
   - –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞
   - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

2. **API versioning**
   - –î–æ–±–∞–≤–∏—Ç—å v1/ prefix –¥–ª—è future-proofing

3. **Metrics and monitoring**
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å queue depth
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

4. **Email notifications –¥–ª—è –∞–¥–º–∏–Ω–æ–≤**
   - –ü—Ä–∏ –Ω–æ–≤–æ–º feedback
   - –î–Ω–µ–≤–Ω–æ–π –¥–∞–π–¥–∂–µ—Å—Ç

---

## üìã –¢–ê–ë–õ–ò–¶–ê –ì–û–¢–û–í–ù–û–°–¢–ò –°–ò–°–¢–ï–ú

| –°–∏—Å—Ç–µ–º–∞ | % Ready | –°—Ç–∞—Ç—É—Å | –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã |
|---------|---------|--------|-------------------|
| –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ | 60% | üü° –§—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ | –î–≤–æ–π–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ |
| –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è | 99% | ‚úÖ –ì–æ—Ç–æ–≤–∞ | –ù—É–∂–Ω—ã Google creds |
| –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ | 85% | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ù–µ—Ç timeout –Ω–∞ LLM, API polling timeout |
| REST API | 100% | ‚úÖ –ì–æ—Ç–æ–≤ | –ù–µ—Ç versioning |
| Credits —Å–∏—Å—Ç–µ–º–∞ | 100% | ‚úÖ –ì–æ—Ç–æ–≤–∞ | None |
| Billing | 20% | ‚ùå –ù–µ –≥–æ—Ç–æ–≤ | YuKassa –Ω–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ |
| –ê–¥–º–∏–Ω–∫–∞ | 75% | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ü–ª–∞—Ç–µ–∂–∏ - –ø—É—Å—Ç–∞—è —Ç–∞–±–ª–∏—Ü–∞ |
| Feedback | 100% | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | None |
| UX / User Flow | 50% | üü° –ß–∞—Å—Ç–∏—á–Ω–æ | –ù–µ—Ç paywall, –Ω–µ—Ç –ª–∏–º–∏—Ç–æ–≤ UI |
| Database | 90% | ‚úÖ –ì–æ—Ç–æ–≤–∞ | –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —Ç–∞–±–ª–∏—Ü—ã payments |
| **–ò–¢–û–ì–û** | **65%** | üü° –ß–ê–°–¢–ò–ß–ù–û | 5 –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –±–ª–æ–∫–µ—Ä–æ–≤ |

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –ü–†–ò–û–†–ò–¢–ï–¢–£

### –ù–ï–î–ï–õ–Ø 1: –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –¥–ª—è launch

- [ ] **Implement billing (YuKassa integration)**
  - –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã payments/subscriptions
  - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å YuKassa SDK
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å endpoints

- [ ] **Fix critical UX issues**
  - –î–æ–±–∞–≤–∏—Ç—å UI –¥–ª—è –ø–æ–∫–∞–∑–∞ –ª–∏–º–∏—Ç–æ–≤
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å paywall –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
  - –î–æ–±–∞–≤–∏—Ç—å error messages

- [ ] **Add Google OAuth credentials**
  - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Google Cloud
  - –î–æ–±–∞–≤–∏—Ç—å credentials –≤ .env

- [ ] **Fix LLM timeout**
  - –î–æ–±–∞–≤–∏—Ç—å timeout –Ω–∞ API –≤—ã–∑–æ–≤—ã
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Circuit breaker

### –ù–ï–î–ï–õ–Ø 2: –í–∞–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

- [ ] –£–ª—É—á—à–∏—Ç—å Dashboard
- [ ] –ó–∞—â–∏—Ç–∏—Ç—å Pro —Ñ–æ—Ä–º–∞—Ç—ã –Ω–∞ free
- [ ] –î–æ–±–∞–≤–∏—Ç—å warning –ø–µ—Ä–µ–¥ –ª–∏–º–∏—Ç–æ–º
- [ ] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –Ω–∞ backend

### –ù–ï–î–ï–õ–Ø 3+: Nice to have

- [ ] API versioning
- [ ] Metrics and monitoring
- [ ] Email notifications
- [ ] –û–±—É—á–∞—é—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç

---

## üèÅ –ò–¢–û–ì–û–í–´–ô –í–´–í–û–î

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: 65% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ production

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ (99%)
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ API —Ö–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω
- ‚úÖ Credits —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ
- ‚úÖ –ê–¥–º–∏–Ω–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞

**–°–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚ùå Billing –Ω–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ (0%)
- ‚ùå UX –∏–º–µ–µ—Ç –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (50%)
- ‚ùå –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ (60%)
- ‚ùå LLM API –Ω–µ—Ç timeout'–∞
- ‚ùå –ö—Ä–∏—Ç–∏—á–Ω—ã–µ drop-off points –≤ user flow

### ‚è±Ô∏è –í—Ä–µ–º—è –¥–æ launch

**–ü—Ä–∏ –ø–æ–ª–Ω–æ–π –∫–æ–º–∞–Ω–¥–µ:**
- –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –±–ª–æ–∫–µ—Ä—ã: 3-5 –¥–Ω–µ–π
- –í–∞–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è: 2-3 –¥–Ω—è
- **–ò–¢–û–ì–û: 1-2 –Ω–µ–¥–µ–ª–∏**

**–ü—Ä–∏ —Ç–µ–∫—É—â–µ–º —Ç–µ–º–ø–µ:**
- –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –±–ª–æ–∫–µ—Ä—ã: 1 –Ω–µ–¥–µ–ª—è
- –í–∞–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è: 3-4 –¥–Ω—è
- **–ò–¢–û–ì–û: 2-3 –Ω–µ–¥–µ–ª–∏**

### üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–ó–ê–ü–£–°–ö–ê–¢–¨ –í PRODUCTION –¢–û–õ–¨–ö–û –ü–û–°–õ–ï:**

1. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è YuKassa (billing –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å)
2. ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è paywall UI (–∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ—Ç–µ—Ä–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤)
3. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ UI –¥–ª—è –ª–∏–º–∏—Ç–æ–≤ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –≤–∏–¥–µ—Ç—å —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç)
4. ‚úÖ Google OAuth credentials (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å)
5. ‚úÖ Timeout –Ω–∞ LLM API (—Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ–π)

**–ë–ï–ó –≠–¢–ò–• –ü–Ø–¢–ò –ü–£–ù–ö–¢–û–í** –∫–æ–Ω–≤–µ—Ä—Å–∏—è –±—É–¥–µ—Ç –∫—Ä–∞–π–Ω–µ –Ω–∏–∑–∫–æ–π (2%) –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø–æ–¥ –≤–æ–ø—Ä–æ—Å–æ–º.

---

## üìé –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –ò–ù–§–û–†–ú–ê–¶–ò–Ø

**–§–∞–π–ª—ã –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞:**
- `API_README.md` ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- `API_SPEC.md` ‚Äî –ø–æ–ª–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è endpoints
- `YUKASSA_INTEGRATION.md` ‚Äî –ø–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø–ª–∞—Ç–µ–∂–µ–π
- `GOOGLE_OAUTH_READINESS_CHECKLIST.md` ‚Äî —á–µ–∫-–ª–∏—Å—Ç OAuth
- `ADMIN_AUTH_SYSTEM.md` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ –∞–¥–º–∏–Ω-—Å–∏—Å—Ç–µ–º—ã

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞:**
- Frontend: `/home/user/ai/screenshot-to-code/frontend/src/`
- Backend: `/home/user/ai/screenshot-to-code/backend/`
- Database: SQLite (`/data/app.db`)

**–ó–∞–ø—É—Å–∫:**
```bash
npm run dev              # –û–±–∞ —Å–µ—Ä–≤–µ—Ä–∞ (frontend + backend)
npm run dev:backend     # –¢–æ–ª—å–∫–æ backend
npm run dev:frontend    # –¢–æ–ª—å–∫–æ frontend
```

---

**–ê—É–¥–∏—Ç –∑–∞–≤–µ—Ä—à—ë–Ω: 24 –¥–µ–∫–∞–±—Ä—è 2025**
