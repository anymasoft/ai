–ê–£–î–ò–¢ –ê–î–ú–ò–ù–ö–ò YouTubeAnalytics
–û—Ü–µ–Ω–∫–∞ –ø–µ—Ä–µ–Ω–æ—Å–∞ –≤ Screen2code
–ß–ê–°–¢–¨ A ‚Äî –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ê–î–ú–ò–ù–ö–ò
–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –ø—Ä–æ–µ–∫—Ç–∞
Frontend (Pages):

/src/app/(dashboard)/admin/
‚îú‚îÄ‚îÄ layout.tsx              # –ó–∞—â–∏—Ç–∞ –≤—Å–µ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ –∞–¥–º–∏–Ω–∫–∏
‚îú‚îÄ‚îÄ users/page.tsx          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚îú‚îÄ‚îÄ limits/page.tsx         # –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ª–∏–º–∏—Ç–æ–≤
‚îú‚îÄ‚îÄ payments/page.tsx       # –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
‚îî‚îÄ‚îÄ messages/
    ‚îú‚îÄ‚îÄ page.tsx            # –°–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π feedback
    ‚îî‚îÄ‚îÄ [id]/page.tsx       # –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–æ–æ–±—â–µ–Ω–∏—è

Backend (API):

/src/app/api/admin/
‚îú‚îÄ‚îÄ users/
‚îÇ   ‚îú‚îÄ‚îÄ route.ts            # GET —Å–ø–∏—Å–æ–∫, PATCH disable/enable
‚îÇ   ‚îú‚îÄ‚îÄ change-plan/route.ts    # POST —Å–º–µ–Ω–∞ —Ç–∞—Ä–∏—Ñ–∞
‚îÇ   ‚îî‚îÄ‚îÄ reset-limits/route.ts   # POST —Å–±—Ä–æ—Å –¥–Ω–µ–≤–Ω—ã—Ö –ª–∏–º–∏—Ç–æ–≤
‚îú‚îÄ‚îÄ payments/
‚îÇ   ‚îú‚îÄ‚îÄ route.ts            # GET —Å–ø–∏—Å–æ–∫ –ø–ª–∞—Ç–µ–∂–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ [id]/route.ts       # DELETE –ø–ª–∞—Ç–µ–∂
‚îÇ   ‚îî‚îÄ‚îÄ extend/route.ts     # POST –ø—Ä–æ–¥–ª–µ–Ω–∏–µ –Ω–∞ 30 –¥–Ω–µ–π
‚îî‚îÄ‚îÄ messages/
    ‚îú‚îÄ‚îÄ route.ts            # GET —Å–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π
    ‚îú‚îÄ‚îÄ [id]/route.ts       # DELETE —Å–æ–æ–±—â–µ–Ω–∏–µ
    ‚îú‚îÄ‚îÄ [id]/read/route.ts  # PATCH –æ—Ç–º–µ—Ç–∏—Ç—å –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º
    ‚îî‚îÄ‚îÄ unread-count/route.ts   # GET –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏:

/src/lib/
‚îú‚îÄ‚îÄ admin-config.ts         # –ö–æ–Ω—Ñ–∏–≥: ADMIN_EMAIL, isAdmin()
‚îî‚îÄ‚îÄ admin-api.ts            # –£—Ç–∏–ª–∏—Ç–∞: verifyAdminAccess()

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

/src/components/
‚îî‚îÄ‚îÄ admin-messages-menu-button.tsx  # –°–∞–π–¥–±–∞—Ä —Å badge –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö

–°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç—É–ø–∞
–ú–µ—Ö–∞–Ω–∏–∑–º –∑–∞—â–∏—Ç—ã: 2-—É—Ä–æ–≤–Ω–µ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

Layout-—É—Ä–æ–≤–µ–Ω—å (admin/layout.tsx):
const session = await getServerSession(authOptions);
if (!session?.user?.id) redirect("/sign-in");
if (session.user.email !== ADMIN_EMAIL) redirect("/");

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
–†–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–µ–∞–¥–º–∏–Ω–æ–≤ –Ω–∞ –≥–ª–∞–≤–Ω—É—é
API-—É—Ä–æ–≤–µ–Ω—å (lib/admin-api.ts):
export async function verifyAdminAccess(request: NextRequest) {
  const session = await getServerSession(authOptions)
  if (!session?.user?.email || session.user.email !== ADMIN_EMAIL) {
    return { isAdmin: false, response: 403 }
  }
  return { isAdmin: true, response: null }
}

–ó–∞—â–∏—Ç–∞ –∫–∞–∂–¥–æ–≥–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 403 –¥–ª—è –Ω–µ–∞–¥–º–∏–Ω–æ–≤
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:

// lib/admin-config.ts
export const ADMIN_EMAIL = "nazarov.soft@gmail.com"

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –æ—Ü–µ–Ω–∫–∞:

‚úÖ –ü—Ä–æ—Å—Ç–æ
‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç
‚ö†Ô∏è Hardcoded email (–Ω–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è)
‚ö†Ô∏è –ù–µ—Ç —Ä–æ–ª–∏ –≤ –ë–î (—Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ email)
–ß–ê–°–¢–¨ B ‚Äî FEEDBACK SYSTEM
–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç feedback
Endpoint: POST /api/feedback

UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç: –õ—é–±–∞—è —Ñ–æ—Ä–º–∞ —Å –ø–æ–ª–µ–º message (–≤ YouTubeAnalytics —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–µ—Ç, —Ñ–æ—Ä–º–∞ –≤—Å—Ç—Ä–æ–µ–Ω–∞ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:

// 1. –í–∞–ª–∏–¥–∞—Ü–∏—è
if (!message || message.trim().length === 0) return 400

// 2. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Å–µ—Å—Å–∏–∏
const session = await getServerSession(authOptions)
const email = session.user.email
const name = session.user.name || "Unknown User"
const [firstName, ...lastName] = name.split(" ")

// 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è subject –∏–∑ –ø–µ—Ä–≤—ã—Ö 50 —Å–∏–º–≤–æ–ª–æ–≤
const subject = message.substring(0, 50) + (message.length > 50 ? "..." : "")

// 4. –ü–æ–ª—É—á–µ–Ω–∏–µ userId
const userResult = await db.execute("SELECT id FROM users WHERE email = ?", [email])
const userId = userResult.rows?.[0]?.id || null

// 5. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
await db.execute(
  `INSERT INTO admin_messages (id, email, firstName, lastName, subject, message, userId, createdAt, isRead)
   VALUES (?, ?, ?, ?, ?, ?, ?, ?, 0)`,
  [uuid(), email, firstName, lastName, subject, message, userId, timestamp]
)

–ß—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è:

message - —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
–ß—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è:

email - –∏–∑ session.user.email
firstName, lastName - –ø–∞—Ä—Å–∏–Ω–≥ session.user.name
subject - –ø–µ—Ä–≤—ã–µ 50 —Å–∏–º–≤–æ–ª–æ–≤ message
userId - –∏–∑ –ë–î –ø–æ email
createdAt - timestamp
isRead - 0 (–Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–æ)
–ö–∞–∫ –∞–¥–º–∏–Ω –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
Endpoint: GET /api/admin/messages

–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:

page - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (default: 1)
email - —Ñ–∏–ª—å—Ç—Ä –ø–æ email (LIKE %email%)
readStatus - "all" | "unread" | "read"
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:

{
  "messages": [...],
  "pagination": {
    "page": 1,
    "limit": 10,
    "total": 25,
    "totalPages": 3,
    "hasMore": true
  }
}

UI —Ñ—É–Ω–∫—Ü–∏–∏:

–¢–∞–±–ª–∏—Ü–∞ —Å–æ –≤—Å–µ–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
–§–∏–ª—å—Ç—Ä—ã: –≤—Å–µ/–Ω–æ–≤—ã–µ/–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ, –ø–æ–∏—Å–∫ –ø–æ email
–ü–∞–≥–∏–Ω–∞—Ü–∏—è (10 –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É)
–ö–ª–∏–∫ –Ω–∞ —Å—Ç—Ä–æ–∫—É ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ /admin/messages/:id
–ö–Ω–æ–ø–∫–∞ Delete
Badge —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö
–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ: Manual refresh (–∫–Ω–æ–ø–∫–∞ –æ–±–Ω–æ–≤–∏—Ç—å)

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

GET /api/admin/messages/unread-count - –±—ç–¥–∂ –≤ —Å–∞–π–¥–±–∞—Ä–µ
PATCH /api/admin/messages/:id/read - –æ—Ç–º–µ—Ç–∏—Ç—å –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º
DELETE /api/admin/messages/:id - —É–¥–∞–ª–∏—Ç—å
–ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö
–¢–∞–±–ª–∏—Ü–∞ admin_messages:

CREATE TABLE admin_messages (
  id TEXT PRIMARY KEY,
  email TEXT,
  firstName TEXT,
  lastName TEXT,
  subject TEXT NOT NULL,
  message TEXT NOT NULL,
  page TEXT DEFAULT 'feedback',
  userId TEXT,
  createdAt INTEGER NOT NULL,
  isRead INTEGER DEFAULT 0,
  FOREIGN KEY (userId) REFERENCES users(id) ON DELETE SET NULL
);

CREATE INDEX idx_admin_messages_createdAt ON admin_messages(createdAt DESC);
CREATE INDEX idx_admin_messages_isRead ON admin_messages(isRead, createdAt DESC);

–ü–æ–ª—è:

id - UUID
email, firstName, lastName - –∫–æ–Ω—Ç–∞–∫—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
subject - –∞–≤—Ç–æ-–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–π –∏–∑ message
message - —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
page - –æ—Ç–∫—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ (–≤—Å–µ–≥–¥–∞ 'feedback')
userId - —Å–≤—è–∑—å —Å users (nullable)
createdAt - Unix timestamp
isRead - 0/1
–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å –∏ –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å
–ù–∞—Å–∫–æ–ª—å–∫–æ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞:

‚úÖ 100% —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞ - –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ YouTube Analytics
‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –ª—é–±–æ–≥–æ SaaS
‚úÖ –ü—Ä–æ—Å—Ç–∞—è –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö
‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
–ú–æ–∂–Ω–æ –ª–∏ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ø–æ—á—Ç–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

‚úÖ –î–ê - –∫–æ–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–Ω–æ—Å–∏–º
‚ö†Ô∏è –ù—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ:
–°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É admin_messages
–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å 4 —Ñ–∞–π–ª–∞ (feedback/route.ts, admin/messages/*, admin-messages-menu-button.tsx)
–î–æ–±–∞–≤–∏—Ç—å —Ö—É–∫ useUnreadMessagesCount
–ß—Ç–æ –Ω—É–∂–Ω–æ –≤—ã–∫–∏–Ω—É—Ç—å/—É–ø—Ä–æ—Å—Ç–∏—Ç—å:

‚ùå –ü–æ–ª–µ page - –Ω–µ –Ω—É–∂–Ω–æ (–≤—Å–µ–≥–¥–∞ –æ–¥–Ω–∞ —Ñ–æ—Ä–º–∞)
‚úÖ –í—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å
–ß–ê–°–¢–¨ C ‚Äî –ê–î–ú–ò–ù–°–ö–ò–ï –§–£–ù–ö–¶–ò–ò
1. –°–º–µ–Ω–∞ —Ç–∞—Ä–∏—Ñ–Ω–æ–≥–æ –ø–ª–∞–Ω–∞
Endpoint: POST /api/admin/users/change-plan

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:

// Input: { userId, plan }
// –í–∞–ª–∏–¥–∞—Ü–∏—è: plan in ["free", "basic", "professional", "enterprise"]

if (plan === "free") {
  await updateUserPlan({ userId, plan: "free", expiresAt: null })
} else {
  const expiresAt = now + (30 * 24 * 60 * 60) // +30 –¥–Ω–µ–π
  await updateUserPlan({ userId, plan, expiresAt })
}

// –í–ê–ñ–ù–û: –í–°–ï–ì–î–ê —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç usage –ø—Ä–∏ —Å–º–µ–Ω–µ –ø–ª–∞–Ω–∞

–ü–æ–ª—å–∑–∞ –¥–ª—è Screen2code:

‚úÖ MUST HAVE - –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è support
‚úÖ –†–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã –æ–ø–ª–∞—Ç—ã (–¥–∞—Ç—å –¥–æ—Å—Ç—É–ø –≤—Ä—É—á–Ω—É—é)
‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–¥–∞—Ç—å —Å–µ–±–µ Pro –¥–ª—è —Ç–µ—Å—Ç–æ–≤)
‚úÖ –ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ (–¥–∞—Ç—å –º–µ—Å—è—Ü –±–µ—Å–ø–ª–∞—Ç–Ω–æ –∑–∞ –±–∞–≥)
–ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞:

üî• –î–û –ø–µ—Ä–≤—ã—Ö –¥–µ–Ω–µ–≥ - –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–π
–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: MUST HAVE

2. –°–±—Ä–æ—Å –ª–∏–º–∏—Ç–æ–≤
Endpoint: POST /api/admin/users/reset-limits

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:

// Input: { userId }
const today = new Date().toISOString().split("T")[0]
await db.execute(
  "DELETE FROM user_usage_daily WHERE userId = ? AND day = ?",
  [userId, today]
)

–ü–æ–ª—å–∑–∞ –¥–ª—è Screen2code:

‚úÖ NICE TO HAVE - –ø–æ–º–æ–≥–∞–µ—Ç support
‚ö†Ô∏è –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –º–æ–¥–µ–ª–∏ –ª–∏–º–∏—Ç–æ–≤ (–¥–Ω–µ–≤–Ω—ã–µ/–º–µ—Å—è—á–Ω—ã–µ/credits)
–ö–æ–Ω—Ç–µ–∫—Å—Ç Screen2code:

–£ –Ω–∞—Å credits-based (–Ω–µ –¥–Ω–µ–≤–Ω—ã–µ –ª–∏–º–∏—Ç—ã)
–°–±—Ä–æ—Å credits = change-plan
–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ù–ï –ù–£–ñ–ù–ê –≤ —Ç–µ–∫—É—â–µ–º –≤–∏–¥–µ
–ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞:

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞, –µ—Å–ª–∏ –¥–æ–±–∞–≤–∏–º rate limits (concurrent, hourly)
–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ù–ï –ù–£–ñ–ù–û (–¥—Ä—É–≥–∞—è –º–æ–¥–µ–ª—å –±–∏–ª–ª–∏–Ω–≥–∞)

3. –ü—Ä–æ–¥–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
Endpoint: POST /api/admin/payments/extend

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:

// Input: { userId, days: 30 }
const currentExpiresAt = user.expiresAt || now
const newExpiresAt = currentExpiresAt + (days * 24 * 60 * 60)
await updateUserPlan({ userId, expiresAt: newExpiresAt })

–ü–æ–ª—å–∑–∞ –¥–ª—è Screen2code:

‚úÖ NICE TO HAVE - –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏, –ø–æ–¥–∞—Ä–∫–∏
‚úÖ –ú–æ–∂–Ω–æ –¥–∞—Ç—å +30 –¥–Ω–µ–π –∑–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–∞
‚ö†Ô∏è –ù–æ —É –Ω–∞—Å credits, –Ω–µ –ø–æ–¥–ø–∏—Å–∫–∏
–ö–æ–Ω—Ç–µ–∫—Å—Ç Screen2code:

–ï—Å–ª–∏ –±—É–¥—É—Ç –ø–æ–¥–ø–∏—Å–∫–∏ (500 credits/month) - –Ω—É–∂–Ω–∞
–ï—Å–ª–∏ —Ç–æ–ª—å–∫–æ top-ups (–∫—É–ø–∏–ª 1000 credits) - –Ω–µ –Ω—É–∂–Ω–∞
–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: NICE TO HAVE (–µ—Å–ª–∏ –¥–æ–±–∞–≤–∏–º –ø–æ–¥–ø–∏—Å–∫–∏)

4. –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–ª–∞—Ç–µ–∂–µ–π
Endpoint: GET /api/admin/payments

UI: –¢–∞–±–ª–∏—Ü–∞ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ (email, –¥–∞—Ç—ã), total sum, –ø–∞–≥–∏–Ω–∞—Ü–∏—è

–î–∞–Ω–Ω—ã–µ:

{
  id: number
  userId: string
  email: string
  plan: string
  provider: "yookassa"
  price: "2 490 ‚ÇΩ"
  expiresAt: timestamp
  createdAt: timestamp
}

–ü–æ–ª—å–∑–∞ –¥–ª—è Screen2code:

‚úÖ MUST HAVE - –∞–Ω–∞–ª–∏–∑ –¥–æ—Ö–æ–¥–æ–≤
‚úÖ –ö—Ç–æ –ø–ª–∞—Ç–∏—Ç, –∫–æ–≥–¥–∞, —Å–∫–æ–ª—å–∫–æ
‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å –æ–ø–ª–∞—Ç–æ–π
–ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞:

üî• –° –ü–ï–†–í–û–ì–û –î–ù–Ø –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–¥–∞–∂
–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: MUST HAVE

5. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
Endpoint: GET /api/admin/users

UI: –¢–∞–±–ª–∏—Ü–∞ —Å:

–§–∏–ª—å—Ç—Ä—ã: email, plan, status (active/disabled)
–ü–∞–≥–∏–Ω–∞—Ü–∏—è (10/20/50 –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É)
Actions: Change Plan, Extend, Disable, Reset Limits
–î–∞–Ω–Ω—ã–µ:

{
  id: string
  email: string
  name: string
  plan: string
  expiresAt: timestamp
  createdAt: timestamp
  lastActive: timestamp
  disabled: boolean
}

–ü–æ–ª—å–∑–∞ –¥–ª—è Screen2code:

‚úÖ MUST HAVE - —Ü–µ–Ω—Ç—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚úÖ –í–∏–¥–µ—Ç—å –≤—Å–µ—Ö —é–∑–µ—Ä–æ–≤
‚úÖ –ë—ã—Å—Ç—Ä–æ –º–µ–Ω—è—Ç—å –ø–ª–∞–Ω—ã
‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∞–±—É–∑–µ—Ä–æ–≤
–ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞:

üî• –î–û –ø–µ—Ä–≤—ã—Ö –¥–µ–Ω–µ–≥ - –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ—Å—Ç–µ—Ä–∞–º–∏
–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: MUST HAVE

6. Disable/Enable –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
Endpoint: PATCH /api/admin/users

Input: { userId, disabled: true/false }

–ü–æ–ª—å–∑–∞ –¥–ª—è Screen2code:

‚úÖ MUST HAVE - –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∞–±—É–∑–µ—Ä–æ–≤
‚úÖ –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
‚úÖ –ú–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –¥–æ—Å—Ç—É–ø
–ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞:

üî• –° –ü–ï–†–í–û–ì–û –î–ù–Ø - –∑–∞—â–∏—Ç–∞ –æ—Ç –∞–±—É–∑–∞
–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: MUST HAVE

–ß–ê–°–¢–¨ D ‚Äî –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –ü–ï–†–ï–ù–û–°–£
–¢–∞–±–ª–∏—Ü–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç	–ü–µ—Ä–µ–Ω–æ—Å–∏—Ç—å?	–ü–æ—á–µ–º—É	–°–ª–æ–∂–Ω–æ—Å—Ç—å	–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç
Feedback System	‚úÖ –î–ê	–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è, 100% –ø–æ–¥—Ö–æ–¥–∏—Ç	–ù–∏–∑–∫–∞—è (4 —Ñ–∞–π–ª–∞)	P0 - MUST
Admin Layout + Access	‚úÖ –î–ê	–ü—Ä–æ—Å—Ç–∞—è –∑–∞—â–∏—Ç–∞, —Ä–∞–±–æ—Ç–∞–µ—Ç	–ù–∏–∑–∫–∞—è (2 —Ñ–∞–π–ª–∞)	P0 - MUST
Users Management	‚úÖ –î–ê	–ö—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è SaaS	–°—Ä–µ–¥–Ω—è—è	P0 - MUST
Change Plan	‚úÖ –î–ê	Support + —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ	–ù–∏–∑–∫–∞—è	P0 - MUST
Payments View	‚úÖ –î–ê	–ê–Ω–∞–ª–∏–∑ –¥–æ—Ö–æ–¥–æ–≤	–°—Ä–µ–¥–Ω—è—è	P0 - MUST
Disable User	‚úÖ –î–ê	–ó–∞—â–∏—Ç–∞ –æ—Ç –∞–±—É–∑–∞	–ù–∏–∑–∫–∞—è	P0 - MUST
Reset Limits	‚ùå –ù–ï–¢	–£ –Ω–∞—Å credits, –Ω–µ daily limits	-	–ù–ï –ù–£–ñ–ù–û
Extend Payment	‚è∏Ô∏è –ü–û–¢–û–ú	–¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –¥–æ–±–∞–≤–∏–º subscriptions	–ù–∏–∑–∫–∞—è	P2 - LATER
Messages Badge	‚úÖ –î–ê	UX –¥–ª—è –∞–¥–º–∏–Ω–∞	–ù–∏–∑–∫–∞—è	P1 - NICE
Unread Counter	‚úÖ –î–ê	–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å	–ù–∏–∑–∫–∞—è	P1 - NICE
–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–π MVP –∞–¥–º–∏–Ω–∫–∏ –¥–ª—è Screen2code
–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä (–¥–µ–ª–∞–µ–º –°–†–ê–ó–£):

1. Admin Access Control
   - lib/admin-config.ts
   - lib/admin-api.ts
   - app/(dashboard)/admin/layout.tsx

2. Feedback System (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç #1)
   - app/api/feedback/route.ts
   - app/api/admin/messages/route.ts
   - app/api/admin/messages/[id]/route.ts
   - app/api/admin/messages/[id]/read/route.ts
   - app/api/admin/messages/unread-count/route.ts
   - app/(dashboard)/admin/messages/page.tsx
   - app/(dashboard)/admin/messages/[id]/page.tsx
   - components/admin-messages-menu-button.tsx
   - hooks/useUnreadMessagesCount.ts
   - –ë–î: —Ç–∞–±–ª–∏—Ü–∞ admin_messages

3. Users Management
   - app/api/admin/users/route.ts
   - app/api/admin/users/change-plan/route.ts
   - app/(dashboard)/admin/users/page.tsx
   - hooks/useAdminUsers.ts

4. Payments View
   - app/api/admin/payments/route.ts
   - app/(dashboard)/admin/payments/page.tsx

5. User Actions
   - PATCH /api/admin/users (disable/enable)

–ò—Ç–æ–≥–æ:

~15 —Ñ–∞–π–ª–æ–≤
1 —Ç–∞–±–ª–∏—Ü–∞ –ë–î (admin_messages)
–í—Ä–µ–º—è: 4-6 —á–∞—Å–æ–≤ –Ω–∞ –ø–µ—Ä–µ–Ω–æ—Å –∏ –∞–¥–∞–ø—Ç–∞—Ü–∏—é
–¶–µ–Ω–Ω–æ—Å—Ç—å: –æ–≥—Ä–æ–º–Ω–∞—è –¥–ª—è support –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
–ß—Ç–æ —Ç–æ—á–Ω–æ –ù–ï –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å —Å–µ–π—á–∞—Å
1. Reset Limits

–£ –Ω–∞—Å credits-based —Å–∏—Å—Ç–µ–º–∞
–ù–µ—Ç daily limits
–ù–µ –Ω—É–∂–Ω–æ –¥–æ –∑–∞–ø—É—Å–∫–∞ rate limiting
2. Extend Payment

–ê–∫—Ç—É–∞–ª—å–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è subscriptions
–£ –Ω–∞—Å –ø–æ–∫–∞ top-ups (buy credits)
–î–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ, –µ—Å–ª–∏ –±—É–¥—É—Ç –ø–æ–¥–ø–∏—Å–∫–∏
3. Limits Page

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç user_usage_daily
–£ –Ω–∞—Å —Ç–∞–∫–æ–π —Ç–∞–±–ª–∏—Ü—ã –Ω–µ—Ç
–ú–æ–∂–µ–º —Å–¥–µ–ª–∞—Ç—å –∞–Ω–∞–ª–æ–≥ –ø–æ–∑–∂–µ (credits usage analytics)
–ß—Ç–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ —à–∞–±–ª–æ–Ω –Ω–∞ –±—É–¥—É—â–µ–µ
1. Extend Payment

// app/api/admin/payments/extend/route.ts
// –ü—Ä–∏–≥–æ–¥–∏—Ç—Å—è, –µ—Å–ª–∏ –¥–æ–±–∞–≤–∏–º recurring subscriptions
POST { userId, days: 30 }

2. Limits/Usage Analytics

// app/(dashboard)/admin/limits/page.tsx
// –ú–æ–∂–Ω–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –ø–æ–∫–∞–∑–∞:
// - credits usage –ø–æ —é–∑–µ—Ä–∞–º
// - top spenders
// - usage trends

3. System Flags

-- –ò–∑ –º–∏–≥—Ä–∞—Ü–∏–∏ 007_add_admin_tables.sql
-- –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è feature flags
CREATE TABLE system_flags (
  key TEXT PRIMARY KEY,
  value TEXT DEFAULT 'false',
  updatedAt INTEGER
);

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ
1. –ó–∞–º–µ–Ω–∏—Ç—å hardcoded email –Ω–∞ —Ä–æ–ª—å –≤ –ë–î:

ALTER TABLE users ADD COLUMN role TEXT DEFAULT 'user';
-- 'user' | 'admin'

2. –î–æ–±–∞–≤–∏—Ç—å admin audit log:

CREATE TABLE admin_audit_log (
  id TEXT PRIMARY KEY,
  adminEmail TEXT NOT NULL,
  action TEXT NOT NULL, -- 'change_plan', 'disable_user', etc.
  targetUserId TEXT,
  details TEXT, -- JSON
  createdAt INTEGER NOT NULL
);

3. –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

Pagination component (–µ—Å—Ç—å –≤–æ –≤—Å–µ—Ö –∞–¥–º–∏–Ω-—Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö)
Filter bar component (email, dates, status)
Table with actions (DropdownMenu pattern)
–ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞
–≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∞—è –≤—ã–≥–æ–¥–∞:

‚úÖ –ì–æ—Ç–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ –≤–º–µ—Å—Ç–æ 40+ —á–∞—Å–æ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –∫–æ–¥ –≤ production
‚úÖ –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å feedback —Å –ø–µ—Ä–≤–æ–≥–æ –¥–Ω—è
–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏:

‚ö†Ô∏è Hardcoded admin email (–ª–µ–≥–∫–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å)
‚úÖ –û—Å—Ç–∞–ª—å–Ω–æ–µ - zero risk
–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:
üî• –ü–ï–†–ï–ù–û–°–ò–¢–¨ –ù–ï–ú–ï–î–õ–ï–ù–ù–û - –º–∏–Ω–∏–º—É–º —É—Å–∏–ª–∏–π, –º–∞–∫—Å–∏–º—É–º –ø–æ–ª—å–∑—ã

–ü–æ—Ä—è–¥–æ–∫ –ø–µ—Ä–µ–Ω–æ—Å–∞:

–î–µ–Ω—å 1: Admin access + Feedback System (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç #1)
–î–µ–Ω—å 2: Users Management + Change Plan
–î–µ–Ω—å 3: Payments View + Disable User
–î–µ–Ω—å 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, UI polish
–ò—Ç–æ–≥–æ: 4 –¥–Ω—è –Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –∞–¥–º–∏–Ω–∫—É –≤–º–µ—Å—Ç–æ 3 –Ω–µ–¥–µ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å –Ω—É–ª—è.

–ö–û–ù–ï–¶ –ê–£–î–ò–¢–ê


