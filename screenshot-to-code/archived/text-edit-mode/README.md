# Text-Edit Mode Archive

**–î–∞—Ç–∞ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏—è:** 2025-12-21
**–°—Ç–∞—Ç—É—Å:** üìã Archiv Archived for future porting to open-lovable
**–ü—Ä–∏—á–∏–Ω–∞:** MVP Simplification ‚Äî focus –Ω–∞ visual-edit (Select & Edit) —Ä–µ–∂–∏–º–µ

---

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

**Text-Edit Mode** ‚Äî —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ **–ë–ï–ó –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞**.

**–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–ª–æ:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "Update" –≤ sidebar
2. –ü–∏—à–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–°–¥–µ–ª–∞–π –∫–Ω–æ–ø–∫—É —Å–∏–Ω–µ–π")
3. **–ë–ï–ó –≤—ã–¥–µ–ª–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞** ‚Äî –ø—Ä–æ—Å—Ç–æ —Ç–µ–∫—Å—Ç
4. –°–∏—Å—Ç–µ–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –≤ AI —Å –∏—Å—Ç–æ—Ä–∏–µ–π –∏ —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
5. AI –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–Ω—è—Ç—å —á—Ç–æ –º–µ–Ω—è—Ç—å –ø–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–º—É –æ–ø–∏—Å–∞–Ω–∏—é

**–û—Ç–ª–∏—á–∏–µ –æ—Ç Visual-Edit (Select & Edit):**
```
TEXT-EDIT (ARCHIVED):
  –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–°–¥–µ–ª–∞–π –∫–Ω–æ–ø–∫—É —Å–∏–Ω–µ–π"
  –°–∏—Å—Ç–µ–º–∞: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¢–û–õ–¨–ö–û —Ç–µ–∫—Å—Ç, AI –¥–æ–ª–∂–Ω–∞ —É–≥–∞–¥–∞—Ç—å –∫–∞–∫—É—é –∫–Ω–æ–ø–∫—É

VISUAL-EDIT (–°–û–•–†–ê–ù–ï–ù–û):
  –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ö–ª–∏–∫–∞–µ—Ç –Ω–∞ –∫–Ω–æ–ø–∫—É ‚Üí –ø–∏—à–µ—Ç "–°–¥–µ–ª–∞–π —Å–∏–Ω–µ–π"
  –°–∏—Å—Ç–µ–º–∞: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç + HTML –∫–æ–¥ –∫–Ω–æ–ø–∫–∏
  AI: –í–∏–¥–∏—Ç —Ç–æ—á–Ω—ã–π –∫–æ–¥, 100% —Ç–æ—á–Ω–æ—Å—Ç—å
```

---

## üóÇÔ∏è –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. UpdateImageUpload.tsx / UpdateImagePreview
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø—Ä–∏ —Ç–µ–∫—Å—Ç–æ–≤–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏

```typescript
// UpdateImageUpload.tsx (52-102 —Å—Ç—Ä–æ–∫–∏)
export function UpdateImagePreview({ updateImages, setUpdateImages }: Props)
// –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–µ–≤—å—é –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

export function UpdateImageUpload({ updateImages, setUpdateImages }: Props)
// –ö–Ω–æ–ø–∫–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –≤:** Sidebar.tsx (—Å—Ç—Ä–æ–∫–∏ 170-195 - –£–î–ê–õ–ï–ù–û)

**–ü–æ—á–µ–º—É –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–æ:** Visual-edit —Ä–µ–∂–∏–º –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

---

### 2. doCreateFromText() —Ñ—É–Ω–∫—Ü–∏—è

**–õ–æ–∫–∞—Ü–∏—è –≤ App.tsx (—Å—Ç—Ä–æ–∫–∏ 265-276):**

```typescript
function doCreateFromText(text: string) {
  // Reset any existing state
  reset();

  setInputMode("text");
  setInitialPrompt(text);
  doGenerateCode({
    generationType: "create",
    inputMode: "text",
    prompt: { text, images: [] },
  });
}
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–¥–∞ –∏–∑ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è (–±–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –≤:** GenerateFromText.tsx (–¥–ª—è –∫–Ω–æ–ø–∫–∏ "Generate from text prompt")

**–ü–æ—á–µ–º—É –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–æ:** MVP —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ image-to-code, text-to-code –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω –≤ open-lovable

---

### 3. Text-Edit —á–∞—Å—Ç—å doUpdate() —Ñ—É–Ω–∫—Ü–∏–∏

**–õ–æ–∫–∞—Ü–∏—è –≤ App.tsx (—Å—Ç—Ä–æ–∫–∏ 279-333):**

**–£–î–ê–õ–ï–ù–ù–ê–Ø —á–∞—Å—Ç—å (—Ç–µ–∫—Å—Ç–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–ï–ó –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞):**
```typescript
// –ë–ï–ó selectedElement ‚Äî —ç—Ç–æ text-edit —Ä–µ–∂–∏–º
const updatedHistory = [
  ...historyTree,
  { text: modifiedUpdateInstruction, images: updateImages },
];
// –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å updateImages –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
```

**–°–û–•–†–ê–ù–ï–ù–ù–ê–Ø —á–∞—Å—Ç—å (—Å selectedElement):**
```typescript
if (selectedElement) {
  // –≠—Ç–æ visual-edit —Ä–µ–∂–∏–º ‚Äî SELECT & EDIT
  modifiedUpdateInstruction =
    updateInstruction +
    " referring to this element specifically: " +
    selectedElement.outerHTML;  // ‚Üê HTML –∫–æ–Ω—Ç–µ–∫—Å—Ç
}
```

---

### 4. App State (text-edit —á–∞—Å—Ç—å)

**–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ app-store.ts:**

```typescript
// TEXT-EDIT STATE (–£–î–ê–õ–ï–ù–û):
interface AppStore {
  updateInstruction: string;
  setUpdateInstruction: (instruction: string) => void;

  updateImages: string[];
  setUpdateImages: (images: string[]) => void;
}
```

**–°–û–•–†–ê–ù–ï–ù–û –≤ app-store.ts:**
```typescript
// VISUAL-EDIT STATE (–û–°–¢–ê–í–õ–ï–ù–û):
interface AppStore {
  inSelectAndEditMode: boolean;
  toggleInSelectAndEditMode: () => void;
  disableInSelectAndEditMode: () => void;
}
```

---

### 5. UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (text-edit)

**–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ Sidebar.tsx (—Å—Ç—Ä–æ–∫–∏ 174-195):**

```typescript
{/* TEXT-EDIT UI - –£–î–ê–õ–ï–ù–û */}
<Textarea
  ref={textareaRef}
  placeholder="Tell the AI what to change..."
  onChange={(e) => setUpdateInstruction(e.target.value)}
  onKeyDown={(e) => {
    if (e.key === "Enter" && !e.shiftKey) {
      doUpdate(updateInstruction);  // –ë–ï–ó selectedElement
    }
  }}
  value={updateInstruction}
/>
<Button onClick={() => doUpdate(updateInstruction)}>
  Update <KeyboardShortcutBadge letter="enter" />
</Button>

<UpdateImageUpload
  updateImages={updateImages}
  setUpdateImages={setUpdateImages}
/>
```

**–°–û–•–†–ê–ù–ï–ù–û –≤ Sidebar.tsx:**
```typescript
{/* VISUAL-EDIT UI - –û–°–¢–ê–í–õ–ï–ù–û */}
{showSelectAndEditFeature && <SelectAndEditModeToggleButton />}
```

---

## üèóÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Text-Edit

### Frontend Pipeline

```
User Input (Text)
    ‚Üì
Sidebar.tsx - Textarea "Tell the AI what to change"
    ‚Üì
doUpdate(updateInstruction, undefined)  ‚Üê –ë–ï–ó selectedElement
    ‚Üì
generateCode() - WebSocket
    ‚Üì
Backend - /generate-code WebSocket endpoint
    ‚Üì
ParameterExtractionMiddleware - –ü–æ–ª—É—á–∞–µ—Ç updateInstruction
    ‚Üì
PromptCreationMiddleware - –°–æ–∑–¥–∞–µ—Ç prompt —Å —Ç–µ–∫—Å—Ç–æ–º
    ‚Üì
CodeGenerationMiddleware - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ AI
    ‚Üì
AI –≤–∏–¥–∏—Ç: "–°–¥–µ–ª–∞–π —Å–∏–Ω–µ–π" (–ë–ï–ó –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∫–∞–∫–æ–π —ç–ª–µ–º–µ–Ω—Ç)
    ‚Üì
AI —É–≥–∞–¥—ã–≤–∞–µ—Ç —á—Ç–æ –º–µ–Ω—è—Ç—å (70-80% —Ç–æ—á–Ω–æ—Å—Ç—å)
    ‚Üì
–†–µ–∑—É–ª—å—Ç–∞—Ç —Å –≤—ã—Å–æ–∫–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é –æ—à–∏–±–æ–∫
```

### Visual-Edit Pipeline (–°–û–•–†–ê–ù–ï–ù–û)

```
User Click (Visual)
    ‚Üì
EditPopup.tsx - Click –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç –≤ preview
    ‚Üì
Highlight element + Popup —Å textarea
    ‚Üì
doUpdate(updateInstruction, selectedElement)  ‚Üê –° selectedElement
    ‚Üì
modifiedInstruction += " referring to this element specifically: " + element.outerHTML
    ‚Üì
generateCode() - WebSocket
    ‚Üì
Backend - /generate-code WebSocket endpoint
    ‚Üì
ParameterExtractionMiddleware - –ü–æ–ª—É—á–∞–µ—Ç instruction + HTML
    ‚Üì
PromptCreationMiddleware - –°–æ–∑–¥–∞–µ—Ç prompt —Å HTML –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
    ‚Üì
CodeGenerationMiddleware - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ AI
    ‚Üì
AI –≤–∏–¥–∏—Ç: "–°–¥–µ–ª–∞–π —Å–∏–Ω–µ–π referring to this element specifically: <button>Click</button>"
    ‚Üì
AI –¢–û–ß–ù–û –∑–Ω–∞–µ—Ç —á—Ç–æ –º–µ–Ω—è—Ç—å (100% —Ç–æ—á–Ω–æ—Å—Ç—å)
    ‚Üì
–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—Å–µ–≥–¥–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
```

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è open-lovable

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –≤–Ω–µ–¥—Ä–∏—Ç—å text-edit —Ä–µ–∂–∏–º –≤ open-lovable, –≤–æ—Ç –∫–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:

### ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–∑ —ç—Ç–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:

1. **Visual-Edit –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** (SELECT & EDIT)
   - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã: SelectAndEditModeToggleButton, EditPopup
   - –õ–æ–≥–∏–∫–∞: selectedElement.outerHTML –ø–µ—Ä–µ–¥–∞—á–∞ –≤ prompt
   - –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ: 100% —Ç–æ—á–Ω–æ—Å—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

2. **doUpdate() —Å selectedElement**
   - –≠—Ç–æ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º
   - –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è —Ç–æ—á–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç–∞
   - –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

### ‚ö†Ô∏è –£—á–µ—Å—Ç—å –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ text-edit:

1. **AI Context Analysis**
   - Text-edit —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª–µ–µ —É–º–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –Ω–∞–º–µ—Ä–µ–Ω–∏—è
   - –ù—É–∂–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ (–∫–∞–∫ –≤ edit-intent-analyzer.ts open-lovable)
   - Regex –ø–∞—Ç—Ç–µ—Ä–Ω—ã: `/change.*color/`, `/update.*button/` –∏ —Ç.–¥.

2. **File Search**
   - Text-edit —Ç—Ä–µ–±—É–µ—Ç –ø–æ–∏—Å–∫–∞ –Ω—É–∂–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
   - Screenshot-to-code —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –æ–¥–Ω–∏–º —Ñ–∞–π–ª–æ–º (—Ü–µ–ª—ã–π HTML)
   - Open-lovable –∏–º–µ–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
   - –ù—É–∂–Ω–∞ —Å–∏—Å—Ç–µ–º–∞: –∞–Ω–∞–ª–∏–∑ ‚Üí –ø–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤ ‚Üí –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π ‚Üí —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

3. **Confidence Score**
   - Text-edit –∏–º–µ–µ—Ç 70-80% —Ç–æ—á–Ω–æ—Å—Ç—å
   - –ù—É–∂–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –æ—Ü–µ–Ω–∫–∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ AI
   - –ï—Å–ª–∏ –Ω–∏–∑–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å ‚Üí –ø—Ä–æ—Å–∏—Ç—å —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

4. **Fallback to Visual**
   - –ï—Å–ª–∏ text-edit –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç ‚Üí –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å visual-edit
   - –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —É–¥–æ–±–µ–Ω

---

## üìå –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞

–ï—Å–ª–∏ –∫—Ç–æ-—Ç–æ –∑–∞—Ö–æ—á–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å text-edit —Ä–µ–∂–∏–º:

- [ ] –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `UpdateImageUpload.tsx` –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- [ ] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞—Ç–Ω–æ `updateInstruction`, `updateImages` –≤ app-store
- [ ] –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å textarea –≤ Sidebar.tsx (—Å—Ç—Ä–æ–∫–∏ 174-184)
- [ ] –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É Update –≤ Sidebar.tsx (—Å—Ç—Ä–æ–∫–∏ 186-191)
- [ ] –î–æ–±–∞–≤–∏—Ç—å `doCreateFromText()` –æ–±—Ä–∞—Ç–Ω–æ –≤ App.tsx
- [ ] –î–æ–±–∞–≤–∏—Ç—å GenerateFromText –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–±—Ä–∞—Ç–Ω–æ
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å text-edit pipeline
- [ ] –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (Visual-Edit –¢–û–õ–¨–ö–û):**
- frontend/src/components/select-and-edit/EditPopup.tsx
- frontend/src/components/select-and-edit/SelectAndEditModeToggleButton.tsx
- frontend/src/App.tsx (modified doUpdate)
- frontend/src/components/sidebar/Sidebar.tsx (modified)

**–ß—Ç–æ –±—ã–ª–æ —É–¥–∞–ª–µ–Ω–æ:**
- frontend/src/components/UpdateImageUpload.tsx (—Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ —Å—é–¥–∞)
- frontend/src/components/generate-from-text/GenerateFromText.tsx (disabled)
- doCreateFromText() –∏–∑ App.tsx
- updateInstruction, updateImages –∏–∑ app-store.ts

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è

### –ü–æ—á–µ–º—É text-edit –º–µ–Ω–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω:

1. **–ù–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ—Å—Ç—å** ‚Äî "–ö–Ω–æ–ø–∫–∞" –º–æ–∂–µ—Ç –æ–∑–Ω–∞—á–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
2. **–ö–æ–Ω—Ç–µ–∫—Å—Ç** ‚Äî AI –Ω–µ –≤–∏–¥–∏—Ç —Ç–æ—á–Ω—ã–π HTML
3. **–û—à–∏–±–∫–∏** ‚Äî –í—ã—Å–æ–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
4. **–ú–µ–¥–ª–µ–Ω–Ω–µ–µ** ‚Äî –ù—É–∂–µ–Ω –∞–Ω–∞–ª–∏–∑ + –ø–æ–∏—Å–∫ —Ñ–∞–π–ª–æ–≤ + –≤—ã–¥–µ–ª–µ–Ω–∏–µ –∫–æ–¥–∞

### –ü–æ—á–µ–º—É visual-edit –æ–ø—Ç–∏–º–∞–ª—å–Ω–µ–µ:

1. **–¢–æ—á–Ω–æ—Å—Ç—å** ‚Äî –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ—á–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç
2. **HTML –∫–æ–Ω—Ç–µ–∫—Å—Ç** ‚Äî AI –≤–∏–¥–∏—Ç —Ç–æ—á–Ω—ã–π –∫–æ–¥
3. **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å** ‚Äî –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –ª—é–±—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
4. **–ë—ã—Å—Ç—Ä–æ—Ç–∞** ‚Äî –ü—Ä—è–º–æ –∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é, –±–µ–∑ –∞–Ω–∞–ª–∏–∑–∞

---

**–í–´–í–û–î:** Text-edit —Ä–µ–∂–∏–º –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è complex –∫–æ–º–∞–Ω–¥ (open-lovable), –Ω–æ –¥–ª—è HTML/CSS —Å—Ç—Ä–∞–Ω–∏—Ü visual-edit –≥–æ—Ä–∞–∑–¥–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ.

---

## ‚úÖ –°—Ç–∞—Ç—É—Å —É–¥–∞–ª–µ–Ω–∏—è –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ (2025-12-21)

### –£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

```
frontend/src/components/UpdateImageUpload.tsx          ‚úì –£–¥–∞–ª–µ–Ω
  ‚îî‚îÄ‚îÄ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ archived/text-edit-mode/

frontend/src/components/generate-from-text/            ‚úì –£–¥–∞–ª–µ–Ω–∞ –ø–∞–ø–∫–∞
  ‚îî‚îÄ‚îÄ GenerateFromText.tsx                              ‚úì –£–¥–∞–ª–µ–Ω
  ‚îî‚îÄ‚îÄ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ archived/text-edit-mode/
```

### –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

**frontend/src/store/app-store.ts**
```
‚ùå –£–î–ê–õ–ï–ù–û:
  - updateInstruction: string
  - setUpdateInstruction(): void
  - updateImages: string[]
  - setUpdateImages(): void

‚úÖ –°–û–•–†–ê–ù–ï–ù–û:
  - appState, setAppState
  - inSelectAndEditMode, toggleInSelectAndEditMode
  - disableInSelectAndEditMode
```

**frontend/src/App.tsx**
```
‚ùå –£–î–ê–õ–ï–ù–û:
  - import GenerateFromText
  - function doCreateFromText(text: string)
  - setUpdateInstruction, updateImages, setUpdateImages –∏–∑ useAppStore
  - doCreateFromText() –≤—ã–∑–æ–≤ –≤ regenerate()
  - <GenerateFromText /> –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ JSX
  - setUpdateInstruction(""), setUpdateImages([]) –≤ reset()

‚úÖ –°–û–•–†–ê–ù–ï–ù–û:
  - function doCreate(referenceImages, inputMode)
  - function doUpdate(updateInstruction, selectedElement?)
  - Visual-edit –ª–æ–≥–∏–∫–∞ —Å selectedElement.outerHTML
  - doGenerateCode() pipeline
  - inputMode="image" (only)
```

**frontend/src/components/sidebar/Sidebar.tsx**
```
‚ùå –£–î–ê–õ–ï–ù–û:
  - import Textarea, KeyboardShortcutBadge, UpdateImageUpload
  - updateInstruction, setUpdateInstruction –∏–∑ useAppStore
  - updateImages, setUpdateImages –∏–∑ useAppStore
  - isDragging state –∏ handleDrop() handler
  - textareaRef –∏ fileToDataURL()
  - useEffect –¥–ª—è —Ñ–æ–∫—É—Å–∞ –Ω–∞ textarea
  - –í–µ—Å—å textarea –±–ª–æ–∫ –¥–ª—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
  - Update –∫–Ω–æ–ø–∫–∞
  - Drag overlay –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
  - UpdateImageUpload –∏ UpdateImagePreview –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

‚úÖ –°–û–•–†–ê–ù–ï–ù–û:
  - Regenerate –∫–Ω–æ–ø–∫–∞
  - SelectAndEditModeToggleButton
  - Error display, Reference images, Variants, History
```

---

**–ò–¢–û–ì–û:** Text-edit —Ä–µ–∂–∏–º –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω. Visual-edit (Select & Edit) –æ—Å—Ç–∞–µ—Ç—Å—è –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
