---
// QuickActions.astro — Mode Selector
// iOS-style segmented control: Template vs Prompt
---

<div class="space-y-1.5">
  <label class="text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Режим</label>
  <div class="flex items-center gap-1 p-1 rounded-xl bg-gray-100 dark:bg-gray-800">
    <button
      id="mode-template"
      data-mode="template"
      class="mode-toggle-btn mode-toggle-active flex-1 flex items-center justify-center gap-1.5
             px-3 py-2 rounded-lg
             text-sm font-medium
             transition-all duration-150"
    >
      <svg class="w-3.5 h-3.5 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
      </svg>
      <span>Шаблон</span>
    </button>

    <button
      id="mode-prompt"
      data-mode="prompt"
      class="mode-toggle-btn flex-1 flex items-center justify-center gap-1.5
             px-3 py-2 rounded-lg
             text-sm font-medium
             transition-all duration-150"
    >
      <svg class="w-3.5 h-3.5 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
      </svg>
      <span>Свой сценарий</span>
    </button>
  </div>
</div>

<style>
  .mode-toggle-btn {
    color: #6b7280;
    cursor: pointer;
    border: none;
    background: transparent;
  }

  .dark .mode-toggle-btn {
    color: #9ca3af;
  }

  .mode-toggle-btn:hover:not(.mode-toggle-active) {
    color: #374151;
  }

  .dark .mode-toggle-btn:hover:not(.mode-toggle-active) {
    color: #d1d5db;
  }

  .mode-toggle-active {
    background: white;
    color: #111827;
    font-weight: 600;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
  }

  .dark .mode-toggle-active {
    background: #374151;
    color: #f9fafb;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
  }

  .mode-toggle-btn:focus-visible {
    outline: 2px solid #6366f1;
    outline-offset: 2px;
  }
</style>

<script>
  const modeButtons = document.querySelectorAll('.mode-toggle-btn');

  modeButtons.forEach(button => {
    button.addEventListener('click', () => {
      modeButtons.forEach(btn => btn.classList.remove('mode-toggle-active'));
      button.classList.add('mode-toggle-active');

      const mode = button.getAttribute('data-mode');
      window.dispatchEvent(new CustomEvent('modeChanged', { detail: { mode } }));
    });
  });
</script>
