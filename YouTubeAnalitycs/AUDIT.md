# AUDIT — обзорный аудит текущего состояния проекта (без правок)

## ЧАСТЬ 1. ПРОДУКТ

### 1) Какую одну главную ценность сейчас даёт продукт?
- Единая панель для анализа YouTube‑каналов и конкурентов + AI‑инсайты/отчёты/сценарии.
- Центр ценности: собрать данные (ScrapeCreators/кеш/БД) → показать метрики и блоки аналитики → дать AI‑выводы и артефакты (отчёт/скрипт).

### 2) Что пользователь делает в первую очередь?
- Авторизация через Google (NextAuth).
- Добавляет конкурентов/каналы (раздел Competitors), чтобы появились данные.
- Смотрит Dashboard (KPI/графики) и/или открывает страницу конкретного канала `/channel/[id]`.

### 3) Где момент получения основной ценности?
- На странице `/channel/[id]` в блоках аналитики (7 разделов: growth/top videos/content intelligence/momentum/audience/comments/deep analysis) — это главный «результат анализа».
- Альтернативный быстрый путь: `/trending` (Shared Momentum Explorer) — просмотр быстрорастущих видео и AI‑инсайтов по трендам.

---

## ЧАСТЬ 2. МОНЕТИЗАЦИЯ

### 1) Что именно продаётся?
- Подписочные тарифы (UI‑описания: Basic/Professional/Enterprise) с лимитом AI‑сценариев в месяц.
- Единый «товар» в интерфейсе выражен через: доступность кнопок обновления в аналитике (Free ограничен) + месячные лимиты сценариев.

### 2) Где пользователь впервые сталкивается с лимитом?
- На `/trending` при попытке сгенерировать сценарий: если `monthlyRemaining === 0` → открывается paywall (`ScriptLimitPaywall`) и/или CTA‑кнопка ведёт на `/settings/billing`.
- На `/settings/billing` лимит показан как «Сценарии в этом месяце: X осталось из Y».

### 3) Насколько путь Free → Pay логичен и короткий?
- Короткий: лимит демонстрируется прямо в момент попытки генерации сценария (trending) и есть прямой переход в billing.
- В billing дополнительно есть объяснение, что Free — для знакомства (до 3 сценариев/месяц; без кнопок «Обновить»; без повторной генерации).

---

## ЧАСТЬ 3. UI / UX

### 1) Какие элементы напрямую ведут к оплате
- Страница `/settings/billing`: блок «Доступные тарифы» (PricingPlans), карточка текущего плана, визуализация лимита сценариев.
- CTA на `/trending` при `monthlyRemaining === 0`: кнопка «Выбрать тариф»/«Увеличить лимит» ведёт на billing.
- Pricing UI на лендинге (компонент `PricingPlans`, секция pricing на `/landing`).

### 2) Какие элементы отвлекают и не участвуют в продаже
- В dashboard‑оболочке присутствуют модули общего шаблона: mail, tasks, calendar, faqs, feedback, chat, users.
- На `/channel/[id]` большая часть UI про «глубокую аналитику» (много блоков), но прямой монетизационный элемент там в основном через ограничения плана (не через явные CTA оплаты в каждом блоке).

### 3) Есть ли конфликтующие CTA
- На pricing‑карточках кнопки ведут на `/sign-in` (даже в режиме billing) — это единое действие, но не является «оплатой», а скорее входом.
- На `/trending` одновременно присутствуют:
  - кнопка обновления видео (secondary, отключается на Free)
  - генерация сценария (primary)
  - paywall/CTA при исчерпании лимита
  Эти CTA направлены в разные действия (обновить данные vs сгенерировать vs перейти в billing), но не выглядят как прямой конфликт — скорее параллельные сценарии.

---

## ЧАСТЬ 4. ТЕХНИЧЕСКОЕ СОСТОЯНИЕ

### 1) Какие части проекта выглядят завершёнными
- Каркас продукта и основные домены по структуре src/app:
  - dashboard, channel, competitors, trending, reports, scripts, settings.
- Большой набор API endpoints (src/app/api) покрывает ключевые операции:
  - sync/show по каналам/видео/комментам/аудитории/momentum/content
  - генерации AI (reports, scripts, сравнение конкурентов, trending insights)
  - billing usage и admin API.
- Конфигурация тарифов/лимитов вынесена в отдельный «source of truth» (`src/config/plan-limits.ts`).

### 2) Какие выглядят как MVP
- Billing: история платежей в empty state, оплата не интегрирована (в README «Монетизация в планах», хотя UI тарифов и лимиты уже есть).
- Landing содержит много маркетинговых секций (blog/team/testimonials и т.п.) — по коду это UI‑слой, не привязанный к продуктовой логике.
- Скрипты/сценарии: есть генерация и история сценариев, но бизнес‑контур покупки/подписки пока в основном UI.

### 3) Где есть риск сжигания ресурсов
- Внешняя зависимость ScrapeCreators API:
  - много логики фолбэков, пагинации, попыток извлечения структур → потенциально много запросов/повторных попыток.
  - ошибки типа rate limit/insufficient credits явно обрабатываются.
- AI‑анализы:
  - архитектурно много отдельных модулей и параллельных вызовов (описано в PROJECT_CONTEXT.md), что увеличивает расход токенов/стоимость.
- База данных:
  - инициализация и миграции выполняются в рантайме в dev (много CREATE/ALTER/PRAGMA), что указывает на активную эволюцию схемы.

---

## ЧАСТЬ 5. РЕЗЮМЕ

### 1) В 3 пунктах — что сейчас является ядром продукта
- Аналитика канала и конкурентов (Dashboard → Channel page с аналитическими блоками).
- Тренды/momentum‑обзор (Trending: Shared Momentum Explorer + AI инсайты).
- Генерация AI‑артефактов: отчёты/инсайты и сценарии (scripts + reports).

### 2) В 3 пунктах — что можно НЕ трогать перед запуском
- Визуальный каркас shadcn/ui + структура страниц (auth + dashboard shell).
- Основной API набор под аналитику (channel/competitors/trending) — покрытие уже широкое.
- Логику лимитов сценариев (plan-limits + script-usage + billing usage endpoint) — уже оформлено как единый источник.

### 3) В 3 пунктах — где главный фокус для первых продаж
- Генерация сценариев как измеримый результат и главный измеримый лимит (billing показывает “X осталось из Y”).
- Trending как вход в value (быстро увидеть «что растёт» и сразу создать сценарий).
- Страница billing как точка объяснения тарифов и текущего использования (CurrentPlanCard + PricingPlans).
