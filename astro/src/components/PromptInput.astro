---
// PromptInput.astro
// Основано на Shadcn/ui Textarea компоненте
// https://ui.shadcn.com/docs/components/textarea
---

<div class="relative w-full">
  <textarea
    id="prompt"
    placeholder="Красивая девушка в чёрном платье медленно идёт вперёд, камера плавно приближается, волосы развеваются на ветру"
    class="w-full px-4 py-3
           border border-slate-200 dark:border-slate-700
           rounded-lg
           bg-white dark:bg-slate-950
           text-slate-900 dark:text-slate-50
           placeholder:text-slate-500 dark:placeholder:text-slate-400
           focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
           dark:focus:ring-offset-slate-950
           disabled:cursor-not-allowed disabled:opacity-50
           resize-none text-sm
           transition-colors duration-200
           shadow-sm"
    rows="3"
  ></textarea>

  <!-- Generate Button Inside -->
  <button
    id="generate-btn"
    class="absolute right-3 top-3
           p-2 rounded-md
           bg-blue-600 hover:bg-blue-700
           text-white
           transition-all duration-200
           hover:shadow-md
           disabled:opacity-50 disabled:cursor-not-allowed
           active:scale-95"
    disabled
  >
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
    </svg>
  </button>
</div>

<style>
  textarea {
    font-family: inherit;
    min-height: 100px;
    max-height: 200px;
  }

  textarea::-webkit-scrollbar {
    width: 6px;
  }

  textarea::-webkit-scrollbar-track {
    background: transparent;
  }

  textarea::-webkit-scrollbar-thumb {
    background: #cbd5e1;
    border-radius: 3px;
  }

  textarea::-webkit-scrollbar-thumb:hover {
    background: #94a3b8;
  }

  :dark textarea::-webkit-scrollbar-thumb {
    background: #475569;
  }

  :dark textarea::-webkit-scrollbar-thumb:hover {
    background: #64748b;
  }
</style>

<script>
  // Auto-resize textarea
  const textarea = document.getElementById('prompt');

  if (textarea) {
    textarea.addEventListener('input', (e) => {
      const target = e.target as HTMLTextAreaElement;
      target.style.height = 'auto';
      target.style.height = Math.min(target.scrollHeight, 200) + 'px';
    });
  }
</script>
