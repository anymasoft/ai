---
// DurationSelector.astro — Duration Selector
// iOS-style segmented control: 6s vs 10s
---

<div class="space-y-1.5">
  <label class="text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Длительность</label>
  <div class="flex items-center gap-1 p-1 rounded-xl bg-gray-100 dark:bg-gray-800">
    <!-- 6s Button -->
    <button
      id="duration-6"
      data-duration="6"
      class="duration-toggle-btn duration-toggle-active flex-1 flex flex-col items-center justify-center
             px-3 py-2 rounded-lg
             transition-all duration-150"
    >
      <span class="text-sm font-semibold leading-tight">6 сек</span>
      <span class="duration-credit-label text-xs leading-tight">1 кредит</span>
    </button>

    <!-- 10s Button -->
    <button
      id="duration-10"
      data-duration="10"
      class="duration-toggle-btn flex-1 flex flex-col items-center justify-center
             px-3 py-2 rounded-lg
             transition-all duration-150"
    >
      <span class="text-sm font-semibold leading-tight">10 сек</span>
      <span class="duration-credit-label text-xs leading-tight">2 кредита</span>
    </button>
  </div>
</div>

<style>
  .duration-toggle-btn {
    color: #6b7280;
    cursor: pointer;
    border: none;
    background: transparent;
  }

  .dark .duration-toggle-btn {
    color: #9ca3af;
  }

  .duration-toggle-btn:hover:not(.duration-toggle-active) {
    color: #374151;
  }

  .dark .duration-toggle-btn:hover:not(.duration-toggle-active) {
    color: #d1d5db;
  }

  .duration-toggle-active {
    background: white;
    color: #111827;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
  }

  .dark .duration-toggle-active {
    background: #374151;
    color: #f9fafb;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
  }

  .duration-toggle-active .duration-credit-label {
    color: #6366f1;
  }

  .dark .duration-toggle-active .duration-credit-label {
    color: #a5b4fc;
  }

  .duration-credit-label {
    color: #9ca3af;
  }

  .duration-toggle-btn:focus-visible {
    outline: 2px solid #6366f1;
    outline-offset: 2px;
  }
</style>

<script>
  const durationButtons = document.querySelectorAll('.duration-toggle-btn');

  durationButtons.forEach(button => {
    button.addEventListener('click', () => {
      durationButtons.forEach(btn => btn.classList.remove('duration-toggle-active'));
      button.classList.add('duration-toggle-active');

      const duration = button.getAttribute('data-duration');
      window.dispatchEvent(new CustomEvent('durationChanged', { detail: { duration } }));
    });
  });
</script>
