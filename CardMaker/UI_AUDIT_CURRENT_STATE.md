# ПОЛНЫЙ АУДИТ UI ПРИЛОЖЕНИЯ CARDMAKER
## Текущее состояние проекта (По состоянию на 30.12.2025)

---

## 1. ОБЩАЯ СТРУКТУРА ПРИЛОЖЕНИЯ

### Архитектура
- **Фреймворк:** Next.js 15.4.7 с App Router
- **Стилизация:** Tailwind CSS 4.1 + shadcn/ui компоненты
- **Состояние:** Zustand (для управления состоянием генерации сценариев)
- **Аутентификация:** NextAuth.js v4 (поддержка Google Sign-In)
- **Главный язык интерфейса:** Русский (с поддержкой интернационализации)

### Роутинг приложения

#### Публичные страницы (без аутентификации):
- `/` - Главная страница (редирект на /landing или /dashboard)
- `/landing` - Лендинг страница для новых пользователей
- `/(auth)/sign-in` - Страница входа
- `/(auth)/sign-up` - Страница регистрации
- `/(auth)/forgot-password` - Восстановление пароля
- `/(auth)/sign-in-2`, `sign-in-3`, `sign-up-2`, `sign-up-3`, `forgot-password-2`, `forgot-password-3` - Альтернативные варианты страниц (шаблоны/черновики)
- `/(auth)/errors/*` - Страницы ошибок (404, 401, 403, 500, 503, access-denied)
- `/auth/google-signin` - Callback для Google Sign-In
- `/auth-callback` - Общий callback для аутентификации

#### Защищённые страницы (требуют аутентификации, внутри `/(dashboard)`):
- `/dashboard` - Главный dashboard с метриками (КПЭ)
- `/trending` - Создание сценариев (главная функция, генерация)
- `/scripts` - История сгенерированных сценариев
- `/scripts/[id]` - Просмотр одного сценария
- `/competitors` - Управление конкурентами (добавление, удаление)
- `/competitors/compare` - Сравнение конкурентов
- `/channel/[id]` - Подробная информация о канале
- `/settings/*` - Настройки пользователя:
  - `/settings/account` - Аккаунт
  - `/settings/appearance` - Оформление
  - `/settings/billing` - Биллинг и тарифы
  - `/settings/connections` - Интеграции
  - `/settings/notifications` - Уведомления
  - `/settings/user` - Профиль пользователя
- `/calendar` - Календарь видео/задач
- `/chat` - Чат с AI (возможно, не полностью реализован)
- `/faqs` - Часто задаваемые вопросы
- `/feedback` - Обратная связь от пользователей
- `/mail` - Система сообщений (демо)
- `/reports` - Отчёты (отключено в UI, есть в кода)
- `/tasks` - Задачи
- `/users` - Список пользователей
- `/admin/*` - Админ-панель (видна только администраторам):
  - `/admin/messages` - Управление сообщениями
  - `/admin/messages/[id]` - Сообщение (подробно)
  - `/admin/payments` - Управление платежами
  - `/admin/users` - Управление пользователями
  - `/admin/limits` - Управление лимитами
- `/dashboard-demo` - Демонстрационный dashboard

### Layout структура защищённой части (/(dashboard)):

```
DashboardClientWrapper (Client Component)
├── SidebarProvider (Configurable)
├── AppSidebar (левая или правая боковая панель, в зависимости от config)
│   ├── Logo + Брендинг (Beem Analytics)
│   ├── Кнопка "+ Создать сценарий" (link to /trending)
│   ├── NavMain (навигационные группы)
│   │   ├── Группа "Аналитика"
│   │   └── Группа "Настройки"
│   └── SidebarFooter
│       ├── SidebarNotification (уведомления)
│       └── NavUser (профиль юзера + меню выхода)
├── SiteHeader
│   ├── SidebarTrigger (кнопка открыть/закрыть сайдбар)
│   ├── SearchTrigger (поиск, открывается по Ctrl+K)
│   └── ModeToggle (переключение Light/Dark темы)
├── SiteFooter (нижний колонтитул)
└── UpgradeToProButton (плавающая кнопка upgrade)
```

---

## 2. СПИСОК ВСЕХ СТРАНИЦ (ПО ОЧЕРЕДИ)

### 2.1 ГЛАВНАЯ СТРАНИЦА
**URL:** `/`
**Тип:** Редирект (Server Component)
**Назначение:** Точка входа в приложение, перенаправляет на /landing (неавторизованных) или /dashboard (авторизованных)
**Что видит пользователь:** Экран загрузки с спиннером
**Элементы:**
- Центрированный спиннер анимации (animate-spin)
- Текст "Loading..." (на английском)

---

### 2.2 ЛЕНДИНГ СТРАНИЦА (для неавторизованных)
**URL:** `/landing`
**Назначение:** Привлечение новых пользователей, демонстрация функциональности сервиса
**Структура сверху вниз:**

1. **LandingNavbar**
   - Логотип Beem Analytics (левый угол)
   - Навигационные ссылки (меню)
   - Кнопка Sign In (правый угол)
   - Поддержка toggle Light/Dark theme

2. **HeroSection**
   - Большой заголовок (H1): "Создайте сильный сценарий для YouTube, который точно набирает просмотры"
   - Подзаголовок (описание)
   - 3D изображение/визуализация справа
   - Две основные кнопки CTA:
     - "Начать бесплатно" (главный)
     - "Посмотреть как это работает" (вторичный)

3. **AboutSection**
   - Текстовое описание сервиса
   - Основные преимущества

4. **FeaturesSection**
   - 3-4 карточки с основными фичами
   - Иконки + название + описание

5. **PricingSection**
   - Карточки тарифов (Free, Pro, Premium и т.д.)
   - Сравнение по фичам
   - Кнопки "Выбрать тариф" на каждой карточке

6. **LandingFooter**
   - Копирайт
   - Ссылки (Privacy, Terms, и т.д.)
   - Социальные сети

**Компоненты которые есть но отключены (закомментированы):**
- LogoCarousel
- StatsSection
- TeamSection
- TestimonialsSection
- BlogSection
- CTASection
- ContactSection
- FaqSection
- LandingThemeCustomizer

---

### 2.3 СТРАНИЦА ВХОДА (Sign In)
**URL:** `/(auth)/sign-in`
**Назначение:** Аутентификация пользователя
**Структура:**
- Центрированная белая карточка (max-width: sm)
- Logo + "Beem Analytics" вверху
- LoginForm1 компонент (основной элемент)
- Фон: светло-серый (bg-muted)
- Высота: min-h-svh (во весь экран)

**Элементы LoginForm1:**
- Input field для email
- Input field для пароля
- Checkbox "Запомнить меня" (опционально)
- Button "Войти" (main CTA)
- Button "Войти через Google" (secondary, Google Sign-In)
- Ссылка "Забыли пароль?" (forgot-password)
- Ссылка "Нет аккаунта? Зарегистрироваться" (sign-up)

**Обработка ошибок:**
- Если error=AccessDenied - показывает AccessDeniedError компонент

---

### 2.4 ГЛАВНЫЙ DASHBOARD
**URL:** `/dashboard`
**Назначение:** Обзор всей аналитики, КПЭ пользователя, быстрый доступ к основным действиям
**Условие:**
- Если пользователь не добавил конкурентов → показывается EmptyState
- Если данные есть → полный dashboard

#### EmptyState версия:
- Заголовок: "Добавьте конкурентов, чтобы начать"
- Описание что нужно делать
- Кнопка "Добавить конкурента"

#### Полная версия структуры сверху вниз:

1. **DashboardHeader**
   - Фильтр по датам (date range picker)
   - Кнопки действий (refresh, settings)

2. **MetricsOverview** (4 карточки в ряд, на мобильных 1 в ряд)
   - Общий просмотренный контент (Total Views)
   - Средний рост видео (Average Growth)
   - Топ канал по импульсу (Top Momentum)
   - Сравнение с предыдущим периодом (YoY Change)
   - Skeleton loading состояние

3. **Grid 2 колонки (на мобильах 1):**
   - **MomentumTrendChart** (左 или вверху на мобиле)
     - Линейный график тренда momentum
     - Интерактивные точки данных
     - Tooltip при наведении
   - **PerformanceBreakdown** (Правый или внизу на мобиле)
     - Pie/Donut chart - распределение видео по типам

4. **Grid 2 колонки (на мобильах 1):**
   - **RecentVideos** (левый блок)
     - Таблица с недавними видео
     - Колонки: Название, Просмотры, Дата
     - Skeleton loading
   - **TopVideosByMomentum** (правый блок)
     - Таблица с видео с высоким momentum
     - Колонки: Название, Momentum Score, Рост
     - Skeleton loading

5. **ChannelInsightsTabs**
   - Вкладки с аналитикой по каналам
   - Подробная информация о каждом конкуренте

**Особенности:**
- Весь контент обёрнут в Suspense границы
- Skeleton loaders для асинхронных блоков
- Revalidate каждые 60 секунд (ISR)
- Всё в контейнере с px-4, md:px-6, py-6

---

### 2.5 СТРАНИЦА СОЗДАНИЯ/ГЕНЕРАЦИИ СЦЕНАРИЕВ (ГЛАВНАЯ ФУНКЦИЯ)
**URL:** `/trending`
**Назначение:** Основной инструмент - генерация сценариев для YouTube видео
**Тип:** Full-featured Client Component с множеством состояний

#### Структура страницы сверху вниз:

1. **Заголовок**
   - H1: "Создайте сценарий для YouTube, который набирает просмотры"
   - Подзаголовок: "На основе трендов конкурентов или любого видео по ссылке"

2. **Блок генерации сценария** (Card с CardHeader/CardContent)

   **2.1 Источник для генерации:**
   - Radio button "Использовать выбранные трендовые видео" (default)
   - Radio button "Использовать конкретное YouTube-видео"
   - Input field для YouTube URL (только при выборе второго варианта)
   - Подсказка текст ниже input

   **2.2 Селектор "Креативности сценария":**
   - 3 radio варианта (как карточки):
     - "Более строгий" (temperature: 0.4) - больше фактов
     - "Сбалансированный" (temperature: 0.7) - optimal, default
     - "Максимальный креатив" (temperature: 1.0) - смелые идеи
   - Каждый вариант имеет описание
   - Выбранный вариант подсвечивается (border-primary, bg-primary/5)

   **2.3 Кнопка генерации:**
   - Если monthlyRemaining === 0:
     - Button "Выбрать тариф" или "Увеличить лимит" (в зависимости от плана)
     - На кнопке иконка FileText
     - С tooltip: "Лимит сценариев исчерпан"
   - Если есть лимит:
     - Button "Сгенерировать сценарий (X)" где X = количество выбранных видео
     - Disabled если:
       - еще не загрузилось состояние (isScriptGenHydrated === false)
       - режим trending и видео не выбраны
       - режим specific и URL не заполнен
       - процесс генерации в процессе (generatingScripts === true)
     - При генерации: Loader2 icon + текст "Генерация..."

3. **Баннер успеха** (если savedScript)
   - Светло-зелёный фон, зелёная граница
   - Текст: "Сценарий успешно создан"

4. **Результат генерации** (если savedScript)
   - **Заголовок с кнопкой:**
     - Текст: "Сценарий успешно создан и сохранён!"
     - Кнопка "Открыть сценарий" с иконкой и стрелкой
   - **Card результата:**
     - Светло-зелёный фон (border-green-200, bg-green-50/50)
     - CardTitle: название сценария (savedScript.title)
     - CardDescription: hook сценария
     - Метаинформация (3 Badge):
       - ID сценария (первые 8 символов)
       - Дата создания
       - Количество исходных видео
     - Структура сценария (outline в виде списка, первые 3 пункта + "и ещё N")
     - Пояснительный текст

5. **Фильтры и контролы** (над таблицей видео)
   - Flex контейнер, responsive (column на мобиле, row на desktop)
   - **Фильтр по каналу:**
     - Лейбл "Фильтр по каналу:"
     - Select dropdown с опциями (Все каналы + список каналов конкурентов)
   - **Фильтр по типу momentum:**
     - Лейбл "Тип momentum:"
     - Select dropdown (Все типы, Высокий рост, Растёт, Обычный, Проседает)
   - **Селектор количества видео:**
     - Лейбл "Показывать:"
     - Select dropdown (10, 20, 50, 100 видео)
   - **Кнопка обновления:** (справа, отдельно)
     - Button size="icon" с иконкой RefreshCw
     - Disabled во время загрузки
     - Спиннер анимация иконки при загрузке
     - Tooltip: "Обновить видео"

6. **Предупреждение для режима specific**
   - Если scriptSourceMode === "specific":
     - Жёлтый баннер (bg-yellow-50, border-yellow-200)
     - Текст: "Выбор трендовых видео недоступен при использовании ссылки на видео"

7. **Таблица видео**
   - **Если видео не найдено:**
     - Card с заголовком
     - Текст объяснения + список инструкций
   - **Если видео есть:**
     - Table с фиксированной шириной (tableLayout="fixed")
     - Disabled (opacity-50, pointer-events-none) в режиме specific

   **Колонки таблицы:**
   - Checkbox (выбрать все / отдельные видео)
   - Видео (название + badge + иконка external link)
   - Momentum (значение + цвет: зелёный если >0.5, синий если >0.1, красный если <-0.3)
   - Просмотров/день (отформатировано: 1M, 1K и т.д.)
   - Всего просмотров (отформатировано)
   - Дата публикации (относительное время + точная дата, или кнопка обновления)
   - Канал (название с ссылкой на YouTube + handle)

   **Сортировка:** клик на заголовок колонки меняет сортировку (ASC/DESC)

   **Информационный блок внизу таблицы:**
   - Объяснение что такое Momentum Score
   - Объяснение как рассчитывается Просмотров/день

8. **Ошибка генерации** (если generationError)
   - Красный фон (bg-red-50, border-red-200)
   - Заголовок: "Ошибка генерации сценариев:"
   - Сообщение ошибки

9. **AI-анализ трендов** (Collapsible)
   - Сворачиваемый блок (defaultOpen={false})
   - Заголовок с иконкой ChevronDown (которая поворачивается)
   - При открытии: TrendingInsights компонент

10. **Paywall для лимита**
    - ScriptLimitPaywall компонент
    - Открывается когда monthlyRemaining === 0

**Состояния загрузки:**
- Loading state: спиннер в Card
- Error state: красное сообщение об ошибке
- Empty state: объяснение как начать

**Специальные моменты:**
- После F5 нужно дождаться гидратации Zustand store (флаг isScriptGenHydrated)
- Cool-down на обновление видео (24 часа)
- Баланс между двумя режимами: trending и specific (видео отключены когда используется URL)

---

### 2.6 ИСТОРИЯ СЦЕНАРИЕВ
**URL:** `/scripts`
**Назначение:** Просмотр всех сгенерированных сценариев пользователя, история, управление

#### Структура:

1. **Заголовок**
   - H1: "История сценариев"
   - Подзаголовок: "Просмотр всех сгенерированных сценариев YouTube"

2. **Кнопка обновления** (вверху справа)
   - Button size="icon" с RefreshCcw иконкой
   - Tooltip: "Обновить список сценариев"

3. **Empty state** (если scripts.length === 0)
   - Card с заголовком "Сценариев пока нет"
   - Описание
   - Список инструкций (5 шагов)
   - Кнопка "Перейти к Trending" с Video иконкой

4. **Таблица сценариев** (если есть)
   - Card обёртка
   - CardHeader с заголовком и описанием (показано N сценариев, отсортировано по новым)
   - Table с 2 колонками:
     - **Сценарий:** название (line-clamp-2) + hook (line-clamp-1, muted-foreground)
     - **Создан:** дата/время + дата (полная)
   - Клик на строку = открыть /scripts/[id]
   - Hover state: bg-muted/50

5. **Информация внизу**
   - Всего сценариев: N
   - Напоминание как создать новый сценарий

**Loading state:**
- Спиннер в Card (h-64)

**Error state:**
- Red text + сообщение об ошибке
- Button "Попробовать снова"

---

### 2.7 ПРОСМОТР ОДНОГО СЦЕНАРИЯ
**URL:** `/scripts/[id]`
**Назначение:** Полный просмотр сценария, копирование, редактирование (если есть)

*(Детали не полностью видны в прочитанных файлах, но основное:)*
- Заголовок: название сценария
- Hook
- Полная структура (outline)
- Полный текст сценария
- "Почему должно выстрелить"
- Кнопка копирования (копирует всё в буфер обмена)
- Кнопка назад

---

### 2.8 УПРАВЛЕНИЕ КОНКУРЕНТАМИ
**URL:** `/competitors`
**Назначение:** Добавление и удаление YouTube каналов конкурентов для анализа

#### Структура:

1. **Заголовок**

2. **Форма добавления конкурента**
   - Input field для введения handle/ID конкурента
   - Button "Добавить конкурента"
   - Error/Success messages

3. **Таблица конкурентов** (если есть)
   - Колонки:
     - Avatar + Название канала
     - Подписчиков
     - Видео
     - Всего просмотров
     - Последний синк (дата)
     - Кнопка удаления (с диалогом подтверждения AlertDialog)

4. **Empty state** (если нет конкурентов)
   - Объяснение и инструкции

---

### 2.9 СРАВНЕНИЕ КОНКУРЕНТОВ
**URL:** `/competitors/compare`
**Назначение:** Сравнительная аналитика по выбранным конкурентам

*(Детали в коде, но это таблица/график для сравнения)*

---

### 2.10 БИЛЛИНГ И ТАРИФЫ
**URL:** `/settings/billing`
**Назначение:** Управление подписками, выбор тарифа, история платежей

#### Структура:

1. **Заголовок**
   - H1: "Тарифы и биллинг"
   - Подзаголовок: "Управляйте своей подпиской и информацией о биллинге"

2. **2-колонная grid (lg, на мобиле 1):**
   - **CurrentPlanCard (левый блок):**
     - Текущий тариф (названный badge)
     - Использованные сценарии: X из Y (progress bar)
     - Процент использования
     - Дата истечения подписки
     - Кнопка "Управлять подпиской" (если premium)
   - **BillingHistoryCard (правый блок):**
     - История платежей
     - Таблица с датами и суммами

3. **Alert для free плана** (если пользователь не на free)
   - Blue background (border-blue-200, bg-blue-50)
   - CardTitle: "Free"
   - Описание плана:
     - До 3 AI-сценариев в месяц
     - Генерация по YouTube-ссылке
     - Без кнопок «Обновить» в аналитике
     - Без повторной генерации

4. **PricingPlans компонент**
   - 3-4 карточки тарифов (Free, Pro, Premium и т.д.)
   - На каждой:
     - Название
     - Цена
     - Список фич с checkmarks
     - Button "Выбрать тариф" или "Текущий план"

**Состояния:**
- Loading: "Загрузка..." в Card
- Пагрузиться с API usage информацией

---

### 2.11 ДРУГИЕ ЗАЩИЩЁННЫЕ СТРАНИЦЫ

#### 2.11.1 Settings страницы

**Account** `/settings/account`
- Форма редактирования профиля
- Поля: name, email, phone и т.д.

**Appearance** `/settings/appearance`
- Выбор темы (Light/Dark/System)
- Выбор цветовой схемы
- Превью

**Connections** `/settings/connections`
- Интеграции с социальными сетями
- Подключение YouTube
- Управление разрешениями

**Notifications** `/settings/notifications`
- Управление уведомлениями
- Чекбоксы для разных типов

**User** `/settings/user`
- Профиль пользователя
- Аватар
- Базовая информация

#### 2.11.2 Другие страницы
- `/channel/[id]` - Подробная аналитика канала конкурента
- `/calendar` - Календарь видео
- `/chat` - Чат с AI (может быть не полностью реализован)
- `/faqs` - FAQ (структурированный контент)
- `/feedback` - Форма обратной связи
- `/mail` - Система сообщений (демо)
- `/tasks` - Управление задачами
- `/users` - Список пользователей
- `/admin/*` - Админ-панель (для администраторов)

---

## 3. ГЛАВНАЯ СТРАНИЦА / DASHBOARD

### Позиция пользователя при первом входе

Если это первый раз после входа и нет конкурентов:
- Пользователь видит **DashboardEmptyState**
- Большой иконографический элемент
- Заголовок: "Нет данных для анализа"
- Описание: "Добавьте первого конкурента, чтобы начать получать аналитику"
- Кнопка: "Добавить конкурента" → /competitors

Если конкуренты уже добавлены и синхронизированы:
- Пользователь видит **полный dashboard** с метриками

### Фокус на действие

**Нет явного единственного CTA**, вместо этого:
- Навигация в sidebar предлагает 2 основных пути:
  1. **+ Создать сценарий** (red button в sidebar) → /trending
  2. **Обзор** → /dashboard (текущая страница)

**Нет явного "дальше" действия** на dashboard - это показ данных, а генерация сценариев происходит на отдельной странице.

### Элементы которые отвлекают

1. **UpgradeToProButton** - плавающая кнопка в левом нижнем углу (может быть навязчива)
2. **Множество графиков** - не сразу понятно какой из них главный
3. **Отсутствие явной иерархии** - все блоки равномерно распределены
4. **Skeleton loaders** - вызывают визуальную нестабильность (flashing)

### Главный CTA на dashboard

**Нет явного CTA.** Dashboard - это просмотр данных. Действие (генерация) вынесено на /trending.

---

## 4. ФОРМА ГЕНЕРАЦИИ СЦЕНАРИЕВ

**Расположение:** страница `/trending`
**Назначение:** Основной инструмент генерации

### Поля формы:

**Обязательные:**
- Выбор источника (radio):
  - Тренды (выбрать видео из таблицы)
  - YouTube ссылка (вставить URL)
- Если выбран тренд-источник: обязательно выбрать хотя бы одно видео
- Если выбран YouTube-источник: обязательно заполнить URL

**Опциональные:**
- Селектор "Креативности" (по умолчанию "Сбалансированный")

**Никаких других полей** - это очень простая форма.

### Как пользователь запускает генерацию

1. Выбирает видео из таблицы (чекбоксы) **ИЛИ** вставляет YouTube URL
2. Опционально меняет "Креативность"
3. Нажимает кнопку **"Сгенерировать сценарий"**
4. Если лимит исчерпан (monthlyRemaining === 0), кнопка превращается в **"Выбрать тариф"**

### Как показывается процесс

**Во время генерации:**
- Кнопка становится disabled
- Иконка меняется на Loader2 (spinning)
- Текст меняется на "Генерация..."
- Zustand store отслеживает состояние (isGenerating)
- На F5 состояние persists благодаря localStorage (Zustand persist)

**После завершения:**
- Кнопка возвращается в нормальное состояние
- Если успех:
  - Зелёный баннер: "Сценарий успешно создан"
  - Карточка с результатом (название, hook, структура)
  - Кнопка "Открыть сценарий"
- Если ошибка:
  - Красный баннер с текстом ошибки

**Feedback:**
- Immediate: кнопка меняется на глазах
- Toast/Alert: для успеха/ошибки (не вижу toast UI, видны только inline alerts)
- Redirect: кнопка "Открыть сценарий" ведёт на /scripts/[id]

---

## 5. ЭКРАН РЕЗУЛЬТАТА

### Где и как показывается результат

**На той же странице** `/trending` где форма.

1. **Success banner** (зелёный)
2. **Result card** (светло-зелёный фон)
   - Название (CardTitle)
   - Hook (CardDescription)
   - Metadata (3 badges: ID, дата, кол-во видео)
   - Структура (outline) - первые 3 пункта + "и ещё N"
   - Кнопка "Открыть сценарий"

3. **Открытие сценария по клику** → `/scripts/[id]`

### Есть ли структура?

**Да:**
- Title
- Hook (одна строка)
- Outline (список пунктов)
- Full scriptText
- whyItShouldWork (объяснение)

Всё это видно на странице результата (inline).

### Можно ли копировать?

**Да, но только на странице** `/scripts/[id]`:
- Кнопка "Copy" копирует весь текст в буфер обмена
- Формат: структурированный текст с заголовками

На странице `/trending` в результате копирования **нет**.

### Есть ли история генераций?

**Да:**
- Все сценарии автоматически сохраняются в БД
- На странице `/scripts` показывается таблица всех сценариев
- Каждый сценарий можно открыть по клику

---

## 6. МОНЕТИЗАЦИЯ В UI

### Где виден баланс/кредиты

1. **На странице** `/settings/billing`:
   - Card "CurrentPlanCard" показывает:
     - Текущий тариф (name)
     - Progress bar: X из Y сценариев использовано
     - Дата истечения подписки

2. **На странице** `/trending`:
   - Рядом с кнопкой "Сгенерировать сценарий" показывается лимит:
     - Если есть лимит: кнопка "Сгенерировать сценарий (X)" где X = кол-во видео
     - Если лимит исчерпан: кнопка "Выбрать тариф" + tooltip с объяснением

### Где появляется paywall

1. **На странице `/trending`:**
   - Когда monthlyRemaining === 0
   - Кнопка "Сгенерировать сценарий" превращается в "Выбрать тариф"
   - Появляется компонент **ScriptLimitPaywall** (сворачивается в dialog/modal)

2. **На странице `/settings/billing`:**
   - Карточки тарифов всегда видны
   - Показан текущий тариф (badge или "Current plan")

### Как выглядит предложение оплаты

**PricingPlans компонент:**
- 3-4 карточки в ряд (на мобиле 1 в ряд, responsive)
- На каждой карточке:
  - Название тарифа (Free, Pro, Premium)
  - Цена (если не Free: в месяц/год)
  - Список фич (7-8 линий) с checkmarks
  - Button "Выбрать тариф" (для бесплатного) / "Upgrade" (для платных)
  - Текущий тариф: button "Текущий план" (disabled)

**ScriptLimitPaywall компонент:**
- Modal/Dialog
- Заголовок: "Исчерпан лимит сценариев"
- Предложение выбрать тариф
- Кнопки: "Выбрать тариф" + "Закрыть"

### Какие действия заблокированы без оплаты

1. **Генерация сценариев** (основная фича):
   - Free план: 3 сценария в месяц
   - При достижении лимита: кнопка disabled, показывается paywall

2. **Другие "продвинутые" функции** (судя по коду):
   - Кнопка "Обновить" в аналитике (на free плане отключена)
   - Повторная генерация (может быть на premium только)
   - Синхронизация данных (может быть limited)

3. **На dashboard:**
   - UpgradeToProButton (плавающая кнопка) - явное напоминание upgrade

---

## 7. НАВИГАЦИЯ И UX-ПРОБЛЕМЫ

### Что кажется перегруженным

1. **Страница `/trending`:**
   - Форма генерации (6-7 элементов)
   - Таблица видео (8-9 колонок, много данных)
   - 3-4 фильтра
   - Результат генерации (если есть) ещё добавляет контент
   - **Итого:** очень много информации на одном скролле

2. **Dashboard:**
   - 5-6 блоков (MetricsOverview, 2 чарта, 2 таблицы, ChannelInsights)
   - Много Suspense границ (разные скорости загрузки)
   - Визуальный "салат" из разных типов контента

3. **Sidebar:**
   - Много разделов (Аналитика: 6 позиций + Настройки: 1 подменю)
   - Не совсем ясно какие для чего (FAQ vs Feedback, Reports отключены)

### Что неочевидно

1. **Разница между:**
   - `/dashboard` - КПЭ/аналитика (инфо)
   - `/trending` - генерация сценариев (действие)
   - Оба находятся в разных местах навигации (dashboard в обзор, trending в главное действие)
   - Новый пользователь может не понять как начать

2. **Режим генерации:**
   - 2 варианта (тренды vs YouTube ссылка)
   - При выборе одного - второе отключается
   - Это не совсем очевидно на первый взгляд

3. **Лимиты:**
   - monthlyRemaining показывается только на `/trending`
   - На dashboard лимит не виден вообще
   - Пользователь может не знать что скоро кончатся сценарии

4. **Бизнес-процесс:**
   - 1️⃣ Добавить конкурентов (`/competitors`)
   - 2️⃣ Синхронизировать данные (кнопка refresh где-то)
   - 3️⃣ Увидеть тренды (`/dashboard`)
   - 4️⃣ Создать сценарий (`/trending`)
   - 5️⃣ Посмотреть историю (`/scripts`)

   Этот flow **не явно обозначен** - новый пользователь может потеряться.

### Где пользователь может потеряться

1. **На главной странице** `/`
   - Редирект на `/landing` или `/dashboard`
   - Новый пользователь видит лендинг (ок)
   - После регистрации видит пустой `/dashboard` (empty state) + приглашение добавить конкурента
   - Если кликнет на "Добавить" → `/competitors`
   - Но потом что? Где сценарий? Нужно вернуться, найти `/trending`?

2. **В sidebar:**
   - Много разных страниц (tasks, mail, users, admin, calendar, faqs)
   - Не понятно какие из них основные, какие вспомогательные
   - Новый пользователь может кликать случайно

3. **На `/trending`:**
   - Много контента (форма + результат + таблица + фильтры)
   - Не сразу понятно по какому пути идти
   - После генерации нужно скроллить вверх чтобы увидеть кнопку "Открыть сценарий"?

### Какие элементы явно "наследие YouTube-сценариев"

1. **Весь контент про YouTube:**
   - Заголовки: "YouTube-видео", "YouTube-канал", "YouTube-сценарий"
   - Текст в пояснениях: "YouTube", "YouTube-сценарист"
   - Таблицы: колонки "Канал", "Просмотры", "Дата публикации" (YouTube-специфик)
   - Фичи: "Анализ конкурентов YouTube", "Аналитика видео", "Momentum Score для YouTube"

2. **Типы данных:**
   - Video, Channel, Subscriber, Momentum (YouTube API specific)
   - viewCount, likeCount, commentCount (YouTube metrics)
   - channelHandle, channelId (YouTube specific)

3. **Интеграции:**
   - Google Sign-In (для YouTube)
   - YouTube API используется для синхронизации данных
   - Все конкуренты это YouTube каналы

4. **Функции:**
   - Синхронизация видео (from YouTube)
   - Анализ контента видео (YouTube specific - transcript, views, likes)
   - Генерация сценариев **для YouTube** (не для других платформ)
   - Метрика "Momentum" = скорость роста просмотров (YouTube-специфик)

5. **Бизнес-логика:**
   - Free план: 3 сценария в месяц = для YouTube creators
   - Платежи через Yookassa (Russian payment - для YouTube creators в RU?)
   - Весь контент на русском языке

6. **Компоненты которые наследуют от YouTube**
   - CommandSearch - поиск видео (YouTube specific)
   - ChannelAvatar - аватар YouTube канала
   - TrendingInsights - insights о YouTube трендах

---

## 8. ИТОГОВОЕ РЕЗЮМЕ

### Под что сейчас заточен UI

**Это копия приложения для создания сценариев YouTube-видео** с фокусом на:
- **Аналитика конкурентов** (отслеживание YouTube каналов)
- **Генерация сценариев** (AI-powered script generation на основе видео)
- **Управление лимитами** (freemium модель с 3 бесплатными в месяц)

**Основной flow:**
1. Авторизация (Google Sign-In)
2. Добавление YouTube каналов (конкуренты)
3. Просмотр аналитики и трендов
4. Генерация сценариев на основе данных
5. Сохранение в историю и копирование

**Пользователи:** YouTube creators, SMM-специалисты, контент-студии

### Какие части можно переиспользовать без изменений

**✅ Архитектура и инфраструктура:**
- Next.js App Router (отлично подходит)
- Tailwind CSS + shadcn/ui (универсальные компоненты)
- Zustand для state management
- NextAuth для аутентификации
- API Route handlers
- Layout система (sidebar + header + footer)

**✅ Компоненты UI (shadcn/ui):**
- Все базовые компоненты (Button, Input, Card, Table, Badge и т.д.)
- Form komponenty (Select, Input, Checkbox, Radio)
- Диалоги (Dialog, AlertDialog)
- Таблицы (Table)
- Навигация (Sidebar, Navigation Menu)
- Themer (Light/Dark mode)

**✅ Общие элементы:**
- Layout и структура (DashboardClientWrapper, SiteHeader, AppSidebar, SiteFooter)
- Навигация в sidebar
- Поиск (CommandSearch компонент)
- Пользовательский профиль и выход
- Настройки биллинга (структура)
- Система уведомлений
- PricingPlans компонент (карточки тарифов)

**✅ Функциональность которую можно адаптировать:**
- Форма добавления "конкурентов" (переделать на товары)
- Таблица с фильтрами и сортировкой (переделать данные)
- История генераций (переделать на историю создания карточек)
- Система лимитов и biллинга (Yookassa интеграция работает)
- State management для процесса генерации (Zustand)

### Какие части точно нужно выбросить или радикально переделать

**❌ Полностью переделать (зависит от YouTube):**
1. **Страница `/trending`**
   - Форма генерации (переделать на "загрузить товары")
   - Таблица видео (переделать на таблицу товаров)
   - Фильтры по каналам (переделать на фильтры по категориям/продавцам)
   - Метрика "Momentum" (YouTube-specific, нужна своя метрика)
   - Результат (сейчас сценарий, переделать на карточку товара)

2. **Страница `/dashboard`**
   - Все графики и метрики (YouTube KPI → ecommerce KPI)
   - MetricsOverview (заменить на relevant метрики для товаров)
   - ChannelInsightsTabs (YouTube-specific)

3. **Страница `/competitors`**
   - Добавление YouTube каналов → добавление товаров/категорий
   - Поля (channelHandle, subscriberCount) → productId, category и т.д.

4. **Все упоминания YouTube**
   - В текстах, заголовках, пояснениях, tooltips
   - Во всех компонентах где явно говорится про YouTube

5. **Google Sign-In может остаться, но:**
   - Логика "синхронизации с YouTube" исчезнет
   - Нужна своя логика загрузки товаров (через CSV, API, ручной ввод)

6. **API endpoints:**
   - Все `/api/competitors/*` (YouTube specific)
   - `/api/channel/[id]/*` (YouTube specific)
   - `/api/scripts/generate` (перейти на генерацию карточек)
   - `/api/trending/*` (YouTube specific)

7. **Интеграции:**
   - YouTube API (YouTube Data API)
   - Можно оставить Google Auth, но удалить YouTube синхронизацию

**❌ Структурно переделать:**
- Главный flow (сейчас: добавить конкурентов → смотреть тренды → генерировать)
- Станет: загрузить товары → выбрать товар → генерировать карточку

**❌ Удалить как неактуальное:**
- `/calendar` (календарь для видео)
- `/mail` (система сообщений, может быть демо)
- `/reports` (отчёты по видео)
- `/chat` (чат, может быть не полностью реализован)
- `/channel/[id]` (подробная аналитика YouTube канала)
- Всё про "конкурентов" как YouTube каналы

**⚠️ Осторожно с:**
- Метрики и KPI (YouTube-specific, нужна своя система)
- Таблицы с колонками (каждая зависит от YouTube API)
- Фильтры (по каналам → по чему будут фильтровать товары?)
- Empty states (сейчас "добавьте конкурентов" → переделать)

---

## ЗАКЛЮЧЕНИЕ

Проект **хорошо структурирован**, но **полностью зависим от YouTube**.

Для переделки под "Генератор карточек товаров для Ozon/Wildberries":
1. **Архитектуру** можно оставить (Next.js, Tailwind, shadcn, Zustand, NextAuth)
2. **Дизайн и компоненты** UI большей частью универсальны
3. **Логику** нужно переделать на 80% (все YouTube-specific части)
4. **Данные** полностью меняются (video → product, channel → seller/category)
5. **API** потребует переписания (YouTube API → своя логика)

**Ориентировочно: 60% переиспользования кода (инфраструктура + компоненты), 40% нового кода (логика + API + данные).**

---

*Дата аудита: 30.12.2025*
*Версия приложения: 1.0.0*
*Язык интерфейса: Русский*
