{% extends "layout_tailadmin.html" %}

{% block title %}Dashboard - JobRadar{% endblock %}

{% block content %}
<div class="grid grid-cols-12 gap-4 md:gap-6">
  <!-- Left Column - 7 cols -->
  <div class="col-span-12 space-y-6 xl:col-span-7">
    <!-- Stat Cards -->
    <div class="grid grid-cols-1 gap-4 md:grid-cols-2">
      <div class="rounded-lg border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-gray-800">
        <div class="flex items-center justify-between">
          <div>
            <h3 class="text-gray-600 text-theme-sm dark:text-gray-400">Total Leads</h3>
            <p class="mt-2 text-3xl font-bold text-gray-900 dark:text-white">1,234</p>
          </div>
          <div class="flex h-14 w-14 items-center justify-center rounded-full bg-blue-100 dark:bg-blue-900/30">
            <svg class="text-blue-600" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"/>
            </svg>
          </div>
        </div>
      </div>

      <div class="rounded-lg border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-gray-800">
        <div class="flex items-center justify-between">
          <div>
            <h3 class="text-gray-600 text-theme-sm dark:text-gray-400">Active Tasks</h3>
            <p class="mt-2 text-3xl font-bold text-gray-900 dark:text-white">42</p>
          </div>
          <div class="flex h-14 w-14 items-center justify-center rounded-full bg-green-100 dark:bg-green-900/30">
            <svg class="text-green-600" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
              <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
            </svg>
          </div>
        </div>
      </div>

      <div class="rounded-lg border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-gray-800">
        <div class="flex items-center justify-between">
          <div>
            <h3 class="text-gray-600 text-theme-sm dark:text-gray-400">Sources</h3>
            <p class="mt-2 text-3xl font-bold text-gray-900 dark:text-white">12</p>
          </div>
          <div class="flex h-14 w-14 items-center justify-center rounded-full bg-purple-100 dark:bg-purple-900/30">
            <svg class="text-purple-600" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
              <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-5.04-6.71l-2.75 3.54h2.79v2h-4v-3.2l2.75-3.54h-2.79v-2h4v3.2z"/>
            </svg>
          </div>
        </div>
      </div>

      <div class="rounded-lg border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-gray-800">
        <div class="flex items-center justify-between">
          <div>
            <h3 class="text-gray-600 text-theme-sm dark:text-gray-400">New This Week</h3>
            <p class="mt-2 text-3xl font-bold text-gray-900 dark:text-white">128</p>
          </div>
          <div class="flex h-14 w-14 items-center justify-center rounded-full bg-orange-100 dark:bg-orange-900/30">
            <svg class="text-orange-600" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2c5.33 4.55 8 8.48 8 11.8 0 4.98-3.8 8.2-8 8.2s-8-3.22-8-8.2C4 10.48 6.67 6.55 12 2zm0 18c3.35 0 6-2.57 6-6.1 0-2.6-1.5-5.35-6-9.24-4.5 3.89-6 6.64-6 9.24 0 3.53 2.65 6.1 6 6.1z"/>
            </svg>
          </div>
        </div>
      </div>
    </div>

    <!-- Placeholder for Charts -->
    <div class="rounded-lg border border-gray-200 bg-white p-6 dark:border-gray-800 dark:bg-gray-800">
      <h3 class="mb-4 text-lg font-semibold text-gray-900 dark:text-white">Recent Activity</h3>
      <div class="h-64 flex items-center justify-center bg-gray-50 dark:bg-gray-900/30 rounded">
        <p class="text-gray-500 dark:text-gray-400">Chart placeholder - Configure in settings</p>
      </div>
    </div>
  </div>

  <!-- Right Column - 5 cols -->
  <div class="col-span-12 xl:col-span-5">
    <!-- Latest Leads -->
    <div class="rounded-lg border border-gray-200 bg-white dark:border-gray-800 dark:bg-gray-800">
      <div class="border-b border-gray-200 px-6 py-4 dark:border-gray-700">
        <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Latest Leads</h3>
      </div>
      <div class="divide-y divide-gray-200 dark:divide-gray-700">
        <div class="flex items-center justify-between px-6 py-4 hover:bg-gray-50 dark:hover:bg-gray-900/20">
          <div class="flex-1">
            <p class="font-medium text-gray-900 dark:text-white">Lead from Telegram</p>
            <p class="text-sm text-gray-500 dark:text-gray-400">2 hours ago</p>
          </div>
          <span class="inline-block bg-blue-100 px-3 py-1 text-xs font-semibold text-blue-800 dark:bg-blue-900/30 dark:text-blue-300 rounded-full">
            New
          </span>
        </div>
        <div class="flex items-center justify-between px-6 py-4 hover:bg-gray-50 dark:hover:bg-gray-900/20">
          <div class="flex-1">
            <p class="font-medium text-gray-900 dark:text-white">Lead from Group</p>
            <p class="text-sm text-gray-500 dark:text-gray-400">5 hours ago</p>
          </div>
          <span class="inline-block bg-green-100 px-3 py-1 text-xs font-semibold text-green-800 dark:bg-green-900/30 dark:text-green-300 rounded-full">
            Viewed
          </span>
        </div>
        <div class="flex items-center justify-between px-6 py-4 hover:bg-gray-50 dark:hover:bg-gray-900/20">
          <div class="flex-1">
            <p class="font-medium text-gray-900 dark:text-white">Lead from Channel</p>
            <p class="text-sm text-gray-500 dark:text-gray-400">12 hours ago</p>
          </div>
          <span class="inline-block bg-gray-100 px-3 py-1 text-xs font-semibold text-gray-800 dark:bg-gray-700 dark:text-gray-300 rounded-full">
            Archived
          </span>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// Logout function for TailAdmin layout
async function logout() {
  try {
    const response = await fetch('/api/logout', {
      method: 'POST',
      credentials: 'include'
    });

    if (response.ok) {
      localStorage.removeItem('user');
      window.location.href = '/login';
    }
  } catch (error) {
    console.error('Logout error:', error);
    window.location.href = '/login';
  }
}
</script>
{% endblock %}
