# –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é" (Backfill)

## üìã –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω –Ω–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ ‚Äî –∫–Ω–æ–ø–∫–∞ "üì¶ –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é", –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–¥–≥—Ä—É–∂–∞—Ç—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –ø–æ—Å—Ç—ã –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ –ª—é–±–æ–≥–æ Telegram –∫–∞–Ω–∞–ª–∞.

## üìÅ –ù–æ–≤—ã–µ/–ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. **models.py** (–ò–ó–ú–ï–ù–ï–ù–û)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è –º–æ–¥–µ–ª—å `SourceMessage` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –¢–∞–±–ª–∏—Ü–∞: `source_messages`
- –ü–æ–ª—è: id, source_chat_id, source_message_id, text, has_keywords, published, checked_at, published_at, source_channel_username
- Unique constraint –Ω–∞ (source_chat_id, source_message_id) ‚Äî –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—é
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞

### 2. **backfill.py** (–ù–û–í–´–ô –§–ê–ô–õ)
- –§—É–Ω–∫—Ü–∏—è `async def backfill_one_post(source_username: str, db: Session) -> dict`
- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–æ–∏—Å–∫ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º (–∫–∞–∫ –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ)
- –ê–Ω—Ç–∏-–±–∞–Ω: asyncio.sleep –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ (0.7-1.5 —Å–µ–∫)
- –õ–∏–º–∏—Ç –Ω–∞ –ø–æ–ø—ã—Ç–∫–∏: –º–∞–∫—Å–∏–º—É–º 50 —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞ –æ–¥–∏–Ω –∫–ª–∏–∫
- –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è: –≤–µ–¥—ë—Ç—Å—è –≤ –ë–î —á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É source_messages
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ Channel –≤ –ø–∞–º—è—Ç–∏ (–Ω–µ –≤ –ë–î)

### 3. **main.py** (–ò–ó–ú–ï–ù–ï–ù–û)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "üì¶ –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é" –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- ‚úÖ –ò–º–ø–æ—Ä—Ç: `from backfill import backfill_one_post`
- ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –≤ `handle_text_input`
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `async def start_backfill()` ‚Äî –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∫–∞–Ω–∞–ª
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `async def process_backfill_channel()` ‚Äî –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤–≤–æ–¥ –∏ –≤—ã–∑—ã–≤–∞–µ—Ç backfill

## üîÑ –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π:

1. –ê–¥–º–∏–Ω –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "üì¶ –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é" –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é
2. –ë–æ—Ç —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç: "–í–≤–µ–¥–∏—Ç–µ –∫–∞–Ω–∞–ª-–∏—Å—Ç–æ—á–Ω–∏–∫ –≤ —Ñ–æ—Ä–º–∞—Ç–µ: @channel_name –∏–ª–∏ t.me/channel_name"
3. –ê–¥–º–∏–Ω –≤–≤–æ–¥–∏—Ç @channel –∏–ª–∏ t.me/channel
4. –ë–æ—Ç –¥–µ–ª–∞–µ—Ç **–æ–¥–Ω—É** –ø–æ–ø—ã—Ç–∫—É:
   - Resolve –∫–∞–Ω–∞–ª–∞ —á–µ—Ä–µ–∑ Telethon
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –ø–æ—Å—Ç—ã (–∏–¥—è –Ω–∞–∑–∞–¥ –ø–æ message_id)
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞–∂–¥—ã–π –ø–æ—Å—Ç –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
   - –ï—Å–ª–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–µ–Ω ‚Äî –ø—É–±–ª–∏–∫—É–µ—Ç –≤ —Ü–µ–ª–µ–≤–æ–π –∫–∞–Ω–∞–ª JobRadar
   - –û–±–Ω–æ–≤–ª—è–µ—Ç –ë–î (checked_at, has_keywords, published, published_at)
5. –ë–æ—Ç –≤—ã–≤–æ–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
   - "‚úÖ –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ: message_id=..., –∫–ª—é—á–∏: ..." (–µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω –ø–æ–¥—Ö–æ–¥—è—â–∏–π)
   - "‚ÑπÔ∏è –†–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ N —Å–æ–æ–±—â–µ–Ω–∏–π)" (–µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ)
   - "‚ùå –û—à–∏–±–∫–∞: –∫–∞–Ω–∞–ª –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω/..." (–µ—Å–ª–∏ –æ—à–∏–±–∫–∞)
6. –í–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

### –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è:

- –ò—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã ‚Äî —Ç–∞–±–ª–∏—Ü–∞ `source_messages` –≤ –ë–î
- –ï—Å–ª–∏ (source_chat_id, source_message_id) —É–∂–µ –µ—Å—Ç—å –≤ –ë–î ‚Üí —Å–æ–æ–±—â–µ–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–º
- –î–∞–∂–µ –µ—Å–ª–∏ –ø–æ—Å—Ç –±—ã–ª –æ–±—Ä–∞–±–æ—Ç–∞–Ω, –Ω–æ –Ω–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω (has_keywords=false) ‚Üí –¥–∞–ª—å—à–µ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è
- –ì–∞—Ä–∞–Ω—Ç–∏—è: **–Ω–µ—Ç –¥—É–±–ª–µ–π** –≤ —Ü–µ–ª–µ–≤–æ–º –∫–∞–Ω–∞–ª–µ

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:

- **–ê–Ω—Ç–∏-–±–∞–Ω**: asyncio.sleep(random.uniform(0.7, 1.5)) –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
- **–õ–∏–º–∏—Ç –Ω–∞–≥—Ä—É–∑–∫–∏**: –º–∞–∫—Å–∏–º—É–º 50 —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞ –æ–¥–∏–Ω –∫–ª–∏–∫
- **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**: —Å–Ω–∞—á–∞–ª–∞ –≤—Å—Ç–∞–≤–∫–∞ –≤ –ë–î, –ø–æ—Ç–æ–º –ø—É–±–ª–∏–∫–∞—Ü–∏—è
- **–û—Ç–∫–∞—Ç**: –µ—Å–ª–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏—è —É–ø–∞–ª–∞ ‚Üí –∑–∞–ø–∏—Å—å –≤ –ë–î –æ—Å—Ç–∞—ë—Ç—Å—è (published=false, –Ω–æ has_keywords –º–æ–≥–ª–∞ –±—ã—Ç—å true)

## üß™ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ:
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç
2. –î–æ–±–∞–≤—å—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ —á–µ—Ä–µ–∑ UI (–Ω–∞–ø—Ä–∏–º–µ—Ä "Python", "—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫")
3. –ù–∞–π–¥–∏—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–∞–Ω–∞–ª, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ—Å—Ç—ã —Å —ç—Ç–∏–º–∏ —Å–ª–æ–≤–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä @pythonru, @jobs_russia)

### –¢–µ—Å—Ç 1: –£—Å–ø–µ—à–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
```
1. /start ‚Üí –º–µ–Ω—é
2. –ù–∞–∂–º–∏ "üì¶ –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é"
3. –í–≤–µ–¥–∏ @pythonru
4. –û–∂–∏–¥–∞–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
5. –ï—Å–ª–∏ –ø–æ—Å—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω ‚Üí "‚úÖ –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ: message_id=..."
6. –ü—Ä–æ–≤–µ—Ä—å —Ü–µ–ª–µ–≤–æ–π –∫–∞–Ω–∞–ª JobRadar ‚Äî –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–æ–≤—ã–π –ø–æ—Å—Ç
```

### –¢–µ—Å—Ç 2: –†–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –ø–æ—Å—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
```
1. /start ‚Üí –º–µ–Ω—é
2. "üì¶ –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é"
3. –í–≤–µ–¥–∏ –∫–∞–Ω–∞–ª, –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω–µ—Ç —Ç–≤–æ–∏—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
4. –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: "‚ÑπÔ∏è –†–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –ø–æ—Å—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ N —Å–æ–æ–±—â–µ–Ω–∏–π)"
```

### –¢–µ—Å—Ç 3: –ö–∞–Ω–∞–ª –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
```
1. /start ‚Üí –º–µ–Ω—é
2. "üì¶ –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é"
3. –í–≤–µ–¥–∏ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–∞–Ω–∞–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä @nochannelexists123456)
4. –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: "‚ùå –ö–∞–Ω–∞–ª –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω"
```

### –¢–µ—Å—Ç 4: –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è
```
1. –ù–∞–∂–º–∏ "üì¶ –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é" ‚Üí @pythonru ‚Üí –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ message_id=12345
2. –ù–∞–∂–º–∏ –µ—â—ë —Ä–∞–∑ "üì¶ –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é" ‚Üí @pythonru
3. –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å message_id=12345 –∏ –Ω–∞–π—Ç–∏ —Å–ª–µ–¥—É—é—â–∏–π —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π
4. –ì–∞—Ä–∞–Ω—Ç–∏—è: message_id=12345 –Ω–µ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –ø–æ–≤—Ç–æ—Ä–Ω–æ
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î:
```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
SELECT * FROM source_messages ORDER BY checked_at DESC LIMIT 10;

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ
SELECT * FROM source_messages WHERE published = 1;

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥—É–±–ª–∏ (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –ø–∞—Ä—ã)
SELECT source_chat_id, source_message_id, COUNT(*)
FROM source_messages
GROUP BY source_chat_id, source_message_id
HAVING COUNT(*) > 1;  -- –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò–º–ø–æ—Ä—Ç—ã –≤ backfill.py:
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏: `format_jobradar_post`, `telegram_client`, `TARGET_CHANNEL_ID`
- –ù–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
- MAX_BACKFILL_ATTEMPTS = 50 (–º–∞–∫—Å–∏–º—É–º —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞ –∫–ª–∏–∫)
- BACKFILL_SLEEP_MIN = 0.7, BACKFILL_SLEEP_MAX = 1.5 (—Å–µ–∫ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏)

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ loggedthrough logger —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º [BACKFILL]
- –õ–µ–≥–∫–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å –≤ –ª–æ–≥–∞—Ö

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (–ø–æ –∑–∞–¥–∞–Ω–∏—é)

- ‚úÖ –¢–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø–æ—Å—Ç –º–∞–∫—Å–∏–º—É–º –∑–∞ –∫–ª–∏–∫
- ‚úÖ –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö cron-–∑–∞–¥–∞—á (—Ç–æ–ª—å–∫–æ –ø–æ –Ω–∞–∂–∞—Ç–∏—é)
- ‚úÖ –ù–µ—Ç –º–∞—Å—Å–æ–≤—ã—Ö —Ä–µ–∂–∏–º–æ–≤ (—Ç–∏–ø–∞ "–∑–∞ –º–µ—Å—è—Ü")
- ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ –ù–ï –∑–∞—Ç—Ä–æ–Ω—É—Ç
- ‚úÖ –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–∞ –≤ backfill.py
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ main.py (–∏–º–ø–æ—Ä—Ç + –∫–Ω–æ–ø–∫–∞ + –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏)
- ‚úÖ –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ –ë–î, –∞ –Ω–µ —á–µ—Ä–µ–∑ —Ü–µ–ª–µ–≤–æ–π –∫–∞–Ω–∞–ª

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã source_messages

```sql
CREATE TABLE source_messages (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    source_chat_id BIGINT NOT NULL,
    source_message_id INTEGER NOT NULL,
    text VARCHAR(4000),
    has_keywords BOOLEAN NOT NULL DEFAULT 0,
    published BOOLEAN NOT NULL DEFAULT 0,
    checked_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    published_at DATETIME,
    source_channel_username VARCHAR(255),

    UNIQUE (source_chat_id, source_message_id),
    INDEX idx_source_chat_message (source_chat_id, source_message_id),
    INDEX idx_published (published)
);
```

## üöÄ –ó–∞–ø—É—Å–∫

–ù–∏—á–µ–≥–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –Ω–µ –Ω—É–∂–Ω–æ. –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ:
1. `init_db()` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç —Ç–∞–±–ª–∏—Ü—É `source_messages` (—á–µ—Ä–µ–∑ SQLAlchemy)
2. –ö–Ω–æ–ø–∫–∞ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ UI
3. –§—É–Ω–∫—Ü–∏—è backfill –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

**–ê–≤—Ç–æ—Ä**: Claude Code
**–î–∞—Ç–∞**: 2026-01-24
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
