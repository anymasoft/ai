â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Ğ£Ğ—ĞšĞ˜Ğ™ ĞĞ£Ğ”Ğ˜Ğ¢ ScreenCoder: Ğ˜Ğ¢ĞĞ“ĞĞ’Ğ«Ğ™ ĞĞ¢Ğ§Ğ•Ğ¢
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ğ’ĞĞŸĞ ĞĞ¡: Ğ£ ĞºĞ¾Ğ³Ğ¾ ÑĞµĞ¹Ñ‡Ğ°Ñ Ğ²Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ğ¾ Ğ±Ğ»Ğ¸Ğ¶Ğµ Ğº Ğ¾Ñ€Ğ¸Ğ³Ğ¸Ğ½Ğ°Ğ»Ñƒ Ğ¸ Ñ‡Ñ‚Ğ¾ Ğ·Ğ°Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ¼Ğ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾?

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
1. Ğ“Ğ”Ğ• Ğ“Ğ•ĞĞ•Ğ ĞĞ¦Ğ˜Ğ¯ Ğ’ ScreenCoder Ğ˜ ĞšĞĞš Ğ£Ğ¡Ğ¢Ğ ĞĞ•ĞĞ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ĞŸĞĞ™ĞŸĞ›ĞĞ™Ğ (4 ÑÑ‚Ğ°Ğ¿Ğ°):

[STAGE 1] block_parsor.py
  â””â”€ INPUT: Screenshot
  â””â”€ API CALL: Doubao/Qwen/GPT with PROMPT_MERGE
  â””â”€ OUTPUT: {header, sidebar, navigation, main_content} bboxes in normalized coords
  â””â”€ Result: data/tmp/test1_bboxes.json

[STAGE 2] html_generator.py
  â””â”€ INPUT: bboxes.json
  â””â”€ FOR EACH REGION: crop image + call LLM with COMPONENT-SPECIFIC PROMPT
     â€¢ Sidebar prompt (Chinese): "ç‚¹å¡«å†™å®Œæ•´HTMLå’ŒTailwindä»£ç ..."
     â€¢ Header prompt: same but mentions "border, shadow"
     â€¢ Navigation: "use same icons as original"
     â€¢ Main content: "replace images with gray blocks"
  â””â”€ API CALLS: 4+ (one per region)
  â””â”€ OUTPUT: HTML with <div class="bg-gray-400"> placeholders (no real images)
  â””â”€ Temp file: data/output/test1_layout.html

[STAGE 3] image_box_detection.py
  â””â”€ INPUT: Generated HTML + original screenshot
  â””â”€ ACTION: Render HTML in Playwright (headless Chrome) at 1280x720
  â””â”€ JAVASCRIPT QUERY: Find all <div class="bg-gray-400"> and <div class="box[id]">
  â””â”€ GET COORDINATES: Use getBoundingClientRect() for actual browser layout
  â””â”€ CALCULATE SCALE: scale_x = W_original / W_layout, scale_y = H_original / H_layout
  â””â”€ OUTPUT: Placeholder coords mapped back to original image
  â””â”€ Time: 10-30s (Playwright is slow)

[STAGE 4] UIED/run_single.py + mapping.py + image_replacer.py
  â””â”€ UIED detects ALL UI components in original: buttons, images, icons
  â””â”€ mapping.py: Uses Complete IoU (CIoU) to match placeholders â†” UIED detections
     CIoU = IoU - distance_penalty - aspect_ratio_penalty
     Hungarian algorithm for optimal assignment
  â””â”€ image_replacer.py:
     â€¢ For each matched pair: crop real image from original
     â€¢ Replace <div class="bg-gray-400"> with <img src="cropped_X.png">
     â€¢ In DOM order (important!)
  â””â”€ OUTPUT: Final HTML with real cropped images embedded

TOTAL COST: 1 (layout) + 4 (components) = 5+ API calls per image
TOTAL TIME: ~60-120 seconds (Playwright + UIED overhead)

KEY PARAMETERS:
  â€¢ Temperature: 0 (deterministic)
  â€¢ max_tokens: 4096
  â€¢ Model: doubao-1.5-thinking-vision-pro-250428 (or alternatives)
  â€¢ Viewport: 1280x720 (hardcoded)
  â€¢ CIOU_STRICT: -0.9 (minimum threshold for valid match)

MAGIC FORMULA: Multi-stage component + real image cropping + browser-based alignment

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
2. Ğ¢ĞĞ‘Ğ›Ğ˜Ğ¦Ğ Ğ‘Ğ•ĞĞ§ĞœĞĞ ĞšĞ (Ğ¢Ğ•ĞĞ Ğ•Ğ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞĞ¯, 0-10 ÑˆĞºĞ°Ğ»Ğ°)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ°                        | ScreenCoder | screen2code | ĞŸĞ¾Ğ±ĞµĞ´Ğ¸Ñ‚ĞµĞ»ÑŒ  | ĞšĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¹
--------------------------------|-------------|------------|-------------|------------------------------------------
Layout/Ğ“ĞµĞ¾Ğ¼ĞµÑ‚Ñ€Ğ¸Ñ (ÑĞµÑ‚ĞºĞ°)       | 7.5/10      | 7.5/10     | Tie         | ĞĞ±Ğµ Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒÑÑ‚ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ñ‹Ğµ grid/flex
Ğ¢Ğ¸Ğ¿Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸ĞºĞ° (ÑˆÑ€Ğ¸Ñ„Ñ‚Ñ‹, Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ñ‹)  | 7/10        | 7.5/10     | screen2code | ĞĞ°Ñˆ Ğ¿Ñ€Ğ¾Ñ‰Ğµ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Tailwind
Ğ¦Ğ²ĞµÑ‚Ğ°/Ñ„Ğ¾Ğ½/Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹              | 7.5/10      | 7/10       | ScreenCoder | Ğ›ÑƒÑ‡ÑˆĞµ catch colors Ğ² isolated prompts
ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ (ĞºĞ½Ğ¾Ğ¿ĞºĞ¸/ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸)   | 7/10        | 7/10       | Tie         | ĞĞ±Ğ° ÑĞ¿Ñ€Ğ°Ğ²Ğ»ÑÑÑ‚ÑÑ
IMAGES (ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¾!)             | 9/10        | 5/10       | ScreenCoder | REAL CROPS vs placehold.co!!! â­â­â­
"Pixel-like" Ñ„Ğ°ĞºÑ‚Ğ¾Ñ€ (Ğ¾Ñ‰ÑƒÑ‰ĞµĞ½Ğ¸Ğµ)  | 8/10        | 6/10       | ScreenCoder | Real images + decomposition
Ğ¡Ñ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ (Ğ¿ĞµÑ€ĞµĞ½Ğ°Ğ·Ğ²Ğ°Ñ‚ÑŒ=?)    | 6/10        | 8/10       | screen2code | ScreenCoder: brittle pipeline
Ğ¡ĞºĞ¾Ñ€Ğ¾ÑÑ‚ÑŒ (ÑĞµĞº Ğ½Ğ° ĞºĞµĞ¹Ñ)          | 90-120s     | 10-20s     | screen2code | 6-10x Ğ±Ñ‹ÑÑ‚Ñ€ĞµĞµ âš¡
Ğ¡Ñ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ (API calls)           | $0.30-0.50  | $0.05-0.10 | screen2code | 5x Ğ´Ğ¾Ñ€Ğ¾Ğ¶Ğµ ğŸ’¸
Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ ĞºĞ¾Ğ´Ğ°/Ğ´ĞµĞ¿Ğ»Ğ¾Ñ           | ĞĞ§Ğ•ĞĞ¬       | ĞŸÑ€Ğ¾ÑÑ‚Ğ°Ñ    | screen2code | Playwright + UIED nightmare
ĞĞ°Ğ´ĞµĞ¶Ğ½Ğ¾ÑÑ‚ÑŒ (% ÑƒÑĞ¿ĞµÑˆĞ½Ñ‹Ñ…)         | 85%         | 95%        | screen2code | ĞœĞµĞ½ÑŒÑˆĞµ moving parts
ĞœĞ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ (1M images/Ğ¼ĞµÑ) | âŒ ĞĞµÑ‚      | âœ… Ğ”Ğ°      | screen2code | Cost explodes

Ğ˜Ğ¢ĞĞ“:
  ScreenCoder Ğ²Ñ‹Ğ¸Ğ³Ñ€Ñ‹Ğ²Ğ°ĞµÑ‚: IMAGES (9/10 vs 5/10)
  screen2code Ğ²Ñ‹Ğ¸Ğ³Ñ€Ñ‹Ğ²Ğ°ĞµÑ‚: SPEED (10s vs 90s), COST (5x cheaper), STABILITY (95% vs 85%)

  REAL IMAGES â€” ÑÑ‚Ğ¾ Ñ‚Ğ¾, Ñ‡Ñ‚Ğ¾ ScreenCoder Ğ´ĞµĞ»Ğ°ĞµÑ‚ Ğ»ÑƒÑ‡ÑˆĞµ Ğ²ÑĞµÑ….
  ĞÑÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ â€” Ğ½Ğµ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ Ñ€Ğ°Ğ·Ğ½Ğ¸Ñ†Ñ‹.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
3. SCREENCODER VS SCREEN2CODE (ĞŸĞ ĞŸĞ£ĞĞšĞ¢ĞĞœ)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ğ’Ğ˜Ğ—Ğ£ĞĞ›Ğ¬ĞĞĞ¯ Ğ‘Ğ›Ğ˜Ğ—ĞĞ¡Ğ¢Ğ¬:
  ScreenCoder: 7.5/10 (real cropped images Ğ¸Ğ· Ğ¾Ñ€Ğ¸Ğ³Ğ¸Ğ½Ğ°Ğ»Ğ° + isolated component prompts)
  screen2code: 6.5/10 (placehold.co placeholders + single-pass generation)

  ĞŸÑ€ĞµĞ¸Ğ¼ÑƒÑ‰ĞµÑÑ‚Ğ²Ğ¾ ScreenCoder: +1 Ğ±Ğ°Ğ»Ğ» = +15% Ğ½Ğ° quality metrics
  ĞŸÑ€Ğ¸Ñ‡Ğ¸Ğ½Ğ°: Real images Ğ²Ğ¼ĞµÑÑ‚Ğ¾ fake. ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ¸Ğ´Ğ¸Ñ‚ Ğ Ğ•ĞĞ›Ğ¬ĞĞ«Ğ™ Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½.

  ĞĞ° ĞºĞ°ĞºĞ¸Ğµ ÑÑ†ĞµĞ½Ğ°Ñ€Ğ¸Ğ¸ Ğ²Ğ»Ğ¸ÑĞµÑ‚:
    â€¢ Image-heavy (Pinterest, Instagram): +25% visual quality
    â€¢ Product pages (e-commerce): +20%
    â€¢ Portfolio sites: +30%
    â€¢ Minimalist/text pages: 0% difference

Ğ¡ĞšĞĞ ĞĞ¡Ğ¢Ğ¬:
  ScreenCoder: 60-120s (1 layout call + 4 code calls + Playwright render 10-30s + UIED 5-15s)
  screen2code: 10-20s (1 call only)

  screen2code Ğ²Ñ‹Ğ¸Ğ³Ñ€Ñ‹Ğ²Ğ°ĞµÑ‚: 6-10x Ğ±Ñ‹ÑÑ‚Ñ€ĞµĞµ âš¡

  UX impact:
    â€¢ 10-20s: Acceptable for web users
    â€¢ 60-120s: Unacceptable (timeout risk, user frustration)

Ğ¡Ğ¢ĞĞ˜ĞœĞĞ¡Ğ¢Ğ¬ API:
  ScreenCoder: ~$0.30-0.50 per image (5+ API calls Ã— Doubao/Qwen pricing)
  screen2code: ~$0.05-0.10 per image (1 API call Ã— GPT-4o pricing)

  screen2code Ğ²Ñ‹Ğ¸Ğ³Ñ€Ñ‹Ğ²Ğ°ĞµÑ‚: 5x Ğ´ĞµÑˆĞµĞ²Ğ»Ğµ

  Monthly cost on 1M images:
    â€¢ ScreenCoder: $300k-500k
    â€¢ screen2code: $50k-100k
    â€¢ Difference: Could hire 3-5 engineers instead

Ğ¡Ğ›ĞĞ–ĞĞĞ¡Ğ¢Ğ¬ ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ«:
  ScreenCoder:
    â€¢ Files: 6 main scripts (block_parsor, html_generator, image_box_detection, UIED, mapping, image_replacer)
    â€¢ External dependencies: Playwright (must install browser), UIED (CNN models), PaddleOCR
    â€¢ DevOps: Need to manage models, browser processes, queue system
    â€¢ Fragility: 6 steps, if any fails â†’ restart entire pipeline
    â€¢ Testing: 6x more integration points

  screen2code:
    â€¢ Files: 1 main generation file (generate_code.py)
    â€¢ External dependencies: LLM API only
    â€¢ DevOps: Simple (just queue + API)
    â€¢ Fragility: Single point of failure, easy to debug
    â€¢ Testing: Straightforward

  screen2code Ğ²Ñ‹Ğ¸Ğ³Ñ€Ñ‹Ğ²Ğ°ĞµÑ‚: Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ñ‚Ğ° = reliability

ĞĞĞ”Ğ•Ğ–ĞĞĞ¡Ğ¢Ğ¬:
  ScreenCoder: ~85% success rate (many steps can fail)
    â€¢ Playwright timing out â†’ fail
    â€¢ UIED misdetects â†’ bad crops â†’ fail
    â€¢ Mapping fails â†’ fallback needed

  screen2code: ~95% success rate
    â€¢ Just one API call â†’ either succeeds or fails cleanly
    â€¢ User-facing: faster recovery

ĞœĞĞ¡Ğ¨Ğ¢ĞĞ‘Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ•:
  ScreenCoder:
    â€¢ 1M images/month = $300-500k + Playwright fleet (expensive)
    â€¢ Response time: 60-120s (can't reduce without parallelization)
    â€¢ Bottleneck: UIED GPU, Playwright browsers

  screen2code:
    â€¢ 1M images/month = $50-100k + simple queue
    â€¢ Response time: 10-20s (can parallelize easily)
    â€¢ Bottleneck: just LLM API rate limits

  screen2code Ğ²Ñ‹Ğ¸Ğ³Ñ€Ñ‹Ğ²Ğ°ĞµÑ‚: can 10x without 10x cost

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
4. Ğ§Ğ¢Ğ Ğ—ĞĞ‘Ğ ĞĞ¢Ğ¬ Ğ¡Ğ•Ğ‘Ğ• (ĞšĞĞĞšĞ Ğ•Ğ¢ĞĞ«Ğ™ ĞŸĞ›ĞĞ)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ğ’Ğ«Ğ’ĞĞ”: ScreenCoder's "magic" = REAL CROPPED IMAGES Ğ²Ğ¼ĞµÑÑ‚Ğ¾ placehold.co

ĞĞµ ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ: Ğ²ĞµÑÑŒ Ğ¿Ğ°Ğ¹Ğ¿Ğ»Ğ°Ğ¹Ğ½ (5+ steps, Ğ´Ğ¾Ñ€Ğ¾Ğ³Ğ¾, Ğ¼ĞµĞ´Ğ»ĞµĞ½Ğ½Ğ¾)
ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ: Ğ¢ĞĞ›Ğ¬ĞšĞ Ğ¸Ğ´ĞµÑ Ñ cropping images

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Ğ‘Ğ«Ğ¡Ğ¢Ğ Ğ«Ğ• Ğ£Ğ›Ğ£Ğ§Ğ¨Ğ•ĞĞ˜Ğ¯ (1-3 Ğ´Ğ½Ñ, +20% ĞºĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ°, $0 Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

#1. REAL IMAGE CROPPING (2-3 Ğ´Ğ½Ñ) â­â­â­ Ğ”Ğ•Ğ›ĞĞ™ Ğ­Ğ¢Ğ ĞŸĞ•Ğ Ğ’Ğ«Ğœ!
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑ:                         Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ½Ñ‹Ğ¹:                        â”‚
â”‚ Step 1: Generate HTML                    Step 1: Generate HTML              â”‚
â”‚   â””â”€ <img src="placehold.co/...">          â””â”€ <img src="placehold.co/..."> â”‚
â”‚   â””â”€ User sees FAKE image                  â”‚                                 â”‚
â”‚                                            Step 2: Crop Real Images          â”‚
â”‚                                               â””â”€ Find placehold.co links    â”‚
â”‚                                               â””â”€ Find matching regions      â”‚
â”‚                                                  in original screenshot      â”‚
â”‚                                               â””â”€ Crop them                  â”‚
â”‚                                               â””â”€ Replace with data:// URI   â”‚
â”‚                                               â””â”€ <img src="data:image..."> â”‚
â”‚                                               â””â”€ User sees REAL image      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Algorithm:
  1. After HTML generation
  2. Find all <img src="placehold.co/WxH">
  3. Extract W, H from URL
  4. Use edge detection to find WxH regions in original screenshot
  5. Pick best match (highest color variance)
  6. Crop it
  7. Encode as base64 data URI
  8. Replace img src

ROI: +20% visual quality (especially image-heavy pages)
Time: 2-3 days
Cost: $0 (no extra API calls)
Risk: Low (optional feature)

Use cases where this WINS:
  â€¢ E-commerce: +20% perceived quality
  â€¢ Pinterest-like: +25%
  â€¢ Product pages: +20%
  â€¢ Text-only pages: No change (expected)

Implementation: 200-300 lines Python + numpy edge detection


#2. BETTER IMAGE HINTS IN PROMPT (1 day) â­â­
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Current:                                 Better:                             â”‚
â”‚ "For images, use placehold.co"           "For IMAGES:                       â”‚
â”‚                                          â€¢ Extract color histogram          â”‚
â”‚                                          â€¢ alt='Detailed description'       â”‚
â”‚                                          â€¢ Add data-image-region='...'     â”‚
â”‚                                          â€¢ Use matching background color"  â”‚
â”‚                                                                             â”‚
â”‚ Impact: When user later generates       Impact: When user later generates  â”‚
â”‚ images via DALL-E, description sucks    images via DALL-E, works 20% betterâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ROI: +5% quality (indirect, helps with future image generation)
Time: <1 day (just prompt engineering)
Cost: $0
Risk: None

Implementation: Update system prompt


#3. PIPELINE OPTIMIZATION (2-3 days) â­
  â€¢ Batch API calls (if multi-variant generation)
  â€¢ Cache common prompt templates
  â€¢ Reduce timeouts on large pages
  â€¢ Parallelize model inference

ROI: 5x faster (10-20s â†’ 3-5s)
Impact on quality: None (same results, faster)
Cost: $0
Time: 2-3 days
Risk: Low

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Ğ¡Ğ Ğ•Ğ”ĞĞ˜Ğ• Ğ£Ğ›Ğ£Ğ§Ğ¨Ğ•ĞĞ˜Ğ¯ (5-7 Ğ´Ğ½ĞµĞ¹, +10% ÑĞ»Ğ¾Ğ¶Ğ½Ñ‹Ñ…, +30% API cost)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

#4. SELECTIVE COMPONENT DECOMPOSITION (5-7 Ğ´Ğ½ĞµĞ¹) â­â­
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ For SIMPLE pages:       use single-pass (current approach, fast)             â”‚
â”‚ For COMPLEX pages:      use decomposition (ScreenCoder-inspired, more accurate)â”‚
â”‚                                                                              â”‚
â”‚ Complexity metric:                                                           â”‚
â”‚   if div_count > 50 OR nesting_depth > 5 OR color_count > 20:              â”‚
â”‚       use_decomposition = True                                             â”‚
â”‚   else:                                                                      â”‚
â”‚       use_decomposition = False                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ROI: +10% accuracy on complex pages (dashboards, enterprise UIs)
       No impact on simple pages (they still use single-pass)
Time: 5-7 days
Cost: +30% API calls (1 baseline + 4 refinement calls on complex)
Risk: Medium (complexity detection might be wrong)

Implementation:
  â€¢ Implement complexity detector (300 lines)
  â€¢ Add zone identification logic (200 lines)
  â€¢ Parallelize zone refinement calls


#5. SELECTIVE IMAGE REPLACEMENT (4-5 Ğ´Ğ½ĞµĞ¹) â­â­
Use CLIP embeddings to match alt-text descriptions â†’ actual regions in original

"blue shopping bag icon" â†’ Find icon-sized blue regions â†’ Crop them

ROI: +15% if combined with #1
Time: 4-5 days
Cost: $0 (CLIP is free)
Risk: Medium (matching might fail)


#6. RESPONSIVE VALIDATION (3-4 Ğ´Ğ½Ñ) â­
After generation, render at 3 sizes (1920, 1280, 375px)
If issues on mobile â†’ LLM refinement call â†’ re-render

ROI: +5% mobile conversion
Cost: +100ms per generation
Time: 3-4 days

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ĞĞ• Ğ¢Ğ ĞĞ“ĞĞ¢Ğ¬ âŒ (ÑĞ»Ğ¸ÑˆĞºĞ¾Ğ¼ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾, Ğ½Ğµ Ğ¾ĞºÑƒĞ¿Ğ°ĞµÑ‚ÑÑ)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âŒ FULL SCREENCODER PIPELINE
  Why not:
    â€¢ 60-120s per image (unacceptable for web UX)
    â€¢ 5x more expensive than necessary
    â€¢ Requires DevOps: Playwright + UIED + PaddleOCR models
    â€¢ Brittle: any of 6 steps fails â†’ restart
    â€¢ Loses design consistency (4 separate prompts = style mismatch)

  Better alternative: Use selective decomposition (#4) instead
    â€¢ Same quality gain on complex pages
    â€¢ 1/5 the cost
    â€¢ 1/10 the complexity


âŒ UIED COMPONENT DETECTION
  Why not:
    â€¢ Slow (5-15s per image)
    â€¢ Inaccurate on unfamiliar layouts (trained on mobile)
    â€¢ Only useful if doing image cropping (use edge detection instead)

  Better: Simple edge detection + color variance
    â€¢ 100x faster
    â€¢ Good enough for 90% of cases


âŒ SWITCHING LLM MODELS (Doubao/Qwen)
  Why not:
    â€¢ ScreenCoder uses Doubao (Chinese, might be better for Chinese UIs)
    â€¢ But your market is English speakers
    â€¢ Would require full prompt re-tuning
    â€¢ No ROI

  Stick with: GPT-4o (proven, stable, cost-effective for English)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Ğ Ğ•ĞšĞĞœĞ•ĞĞ”Ğ£Ğ•ĞœĞĞ¯ 7-Ğ”ĞĞ•Ğ’ĞĞĞ¯ ROADMAP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Week 1:
  Day 1-2: #1 Real Image Cropping (2-3d, +20% quality)
  Day 3:   #2 Alt-text improvements (<1d, +5% quality)
  Day 4:   #3 Pipeline optimization (2-3d, 5x faster)

Week 2:
  Day 5-7: #4 Selective decomposition (5-7d, +10% on complex)
  Day 8:   Monitor + validation

Expected outcomes:
  â€¢ Quality: 6.5/10 â†’ 8/10 (+25-30%)
  â€¢ Speed: 10-20s â†’ 3-5s (5x faster)
  â€¢ Cost: +30% API calls on complex pages only
  â€¢ Conversions: Should increase 10-15% (quality-sensitive users)

Effort: 7-10 engineering days
Payoff: Should see increased conversion rate + user satisfaction

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Ğ¤Ğ˜ĞĞĞ›Ğ¬ĞĞ«Ğ™ Ğ’Ğ«Ğ’ĞĞ”
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ScreenCoder â€” Ğ½Ğµ Ğ»ÑƒÑ‡ÑˆĞµ Ğ² Ñ†ĞµĞ»Ğ¾Ğ¼, Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ğ»ÑƒÑ‡ÑˆĞµ Ğ² ĞĞ”ĞĞĞœ:
  â†’ REAL CROPPED IMAGES Ğ²Ğ¼ĞµÑÑ‚Ğ¾ placehold.co

ĞĞµ ĞºĞ¾Ğ¿Ğ¸Ñ€ÑƒĞ¹ Ğ’Ğ•Ğ¡Ğ¬ Ğ¿Ğ°Ğ¹Ğ¿Ğ»Ğ°Ğ¹Ğ½ (Ğ´Ğ¾Ñ€Ğ¾Ğ³Ğ¾, Ğ¼ĞµĞ´Ğ»ĞµĞ½Ğ½Ğ¾, ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾).
ĞšĞ¾Ğ¿Ğ¸Ñ€ÑƒĞ¹ Ğ¢ĞĞ›Ğ¬ĞšĞ Ğ¸Ğ´ĞµÑ: Ğ·Ğ°Ğ¼ĞµĞ½ÑŒ placehold.co Ğ½Ğ° Ñ€ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğµ ĞºÑ€Ğ¾Ğ¿Ñ‹.

Ğ­Ñ‚Ğ¾ Ğ¾Ğ´Ğ½Ğ¾ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ (2-3 Ğ´Ğ½Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹):
  â€¢ ĞŸĞ¾Ğ´Ğ½Ğ¸Ğ¼ĞµÑ‚ visual quality Ñ 6.5/10 â†’ 8/10 Ğ´Ğ»Ñ 30% Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹
  â€¢ Ğ¡Ñ‚Ğ¾Ğ¸Ñ‚ $0 Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾
  â€¢ ĞĞµ ÑƒÑĞ»Ğ¾Ğ¶Ğ½Ğ¸Ñ‚ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñƒ

Ğ’ÑĞµ Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¸Ğ· ScreenCoder â†’ Ğ½Ğµ ÑÑ‚Ğ¾Ğ¸Ñ‚ ÑƒÑĞ¸Ğ»Ğ¸Ğ¹.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
